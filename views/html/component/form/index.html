<div class="mxu-cp-form-wraper">
  <div class="editDate-section">
      <div class="p-v-md">
          <div class="hoge-edit-head">
              <div class="hoge-return-body" ui-sref="app.component.list.type">
                  <i class="fa typeface-menu_fanhuiliebiao" ></i>
                  <span class="return-tip">返回列表</span>
              </div>
              <em>{{vm.pageTitle}}</em>
          </div>
      </div>
      <div class="edit-form hoge-border">
          <div class="form-card">
              <div class="header">基本信息</div>
              <div class="content">
                  <div class="form-group">
                      <label class="label-name">组件名称</label>
                      <input type="text" ng-model="vm.detailInfo.name" ng-focus="vm.nameFocus = true"
                             ng-class="{'focus-color':vm.nameFocus}" ng-blur="vm.nameFocus = false">
                  </div>
                  <div class="form-group">
                      <label class="label-name">所属分类</label>
                      <div class="btn-group dropdown select-drop hoge-dropdown">
                          <button class="btn btn-sm dropdown-toggle" data-toggle="dropdown">
                              <span class="dropdown-label">{{vm.selectedCategory.name}}</span>
                              <span class="caret"></span>
                          </button>
                          <div class="dropdown-menu text-left text-sm">
                              <a class="dropdown-item" ng-repeat="item in vm.categoryList" ng-click="vm.categorySelect(item)">{{item.name}}</a>
                          </div>
                      </div>
                  </div>
                  <!-- <div class="form-group">
                      <label class="label-name">组件标识</label>
                      <input type="text" ng-model="vm.detailInfo.component_sign" disabled>
                  </div> -->
                  <div class="form-group">
                      <label class="label-name">展示类型</label>
                      <div class="btn-group dropdown select-drop hoge-dropdown">
                            <button class="btn btn-sm dropdown-toggle" data-toggle="dropdown">
                                <span class="dropdown-label">{{vm.selectedType.name}}</span>
                                <span class="caret"></span>
                            </button>
                            <div class="dropdown-menu text-left text-sm">
                                <a class="dropdown-item" ng-repeat="item in vm.typeList" ng-click="vm.typeSelect(item)">{{item.name}}</a>
                            </div>
                        </div>
                  </div>
                  <div class="form-group">
                      <label class="label-name">描述</label>
                      <textarea class="text-top" cols="30" rows="4" ng-model="vm.detailInfo.brief" ng-focus="vm.briefFocus = true"
                                ng-class="{'focus-color':vm.briefFocus}" ng-blur="vm.briefFocus = false"
                                placeholder="请输入描述" maxlength="128" style="resize: none;"></textarea>
                      <div class="count">
                          <div num-count="vm.detailInfo.brief"  count-top="-17" count-max="128" count-position="right"></div>
                      </div>
                  </div>
                  <div class="form-group" style="position: relative;">
                    <label class="label-name">组件示意图</label>
                    <div class="index-pic">
                      <img ng-src="{{vm.detailInfo.index_pic}}"/>
                      <input type="file" nv-file-select uploader="vm.imageUploader" accept="image/gif,image/jpeg,image/png,image/bmp" class="upload"/>
                      <div class="pos-abt fileUpTip" ng-if="!vm.detailInfo.index_pic">
                            <i class="typeface-form_zengjia"></i>
                            <span class="zengjia-font">点击上传</span>
                        </div>
                    </div>
                    <div class="upload_tip">示意图建议宽度285px，高度范围50~200px</div>
                  </div>
              </div>
          </div>
          <div class="form-card">
              <div class="header">可编辑字段</div>
              <div class="content">
                <div class="form-group">
                  <label class="label-name">可编辑字段:</label>
                  <div class="check-box-list">
                    <label class="checkbox-inline" ng-repeat="item in vm.detailInfo.fields">
                      <input type="checkbox" ng-checked="item.is_use === 1" ng-click="vm.handleCheck(item)" >{{item.title}}
                    </label>
                  </div>
                </div>
              </div>
          </div>
          <div class="form-card">
              <div class="header">组件代码</div>
              <div class="">
                  <!-- html编辑框 -->
                  <div class="ele-box">
                    <div class="ele-header">
                      <div class="ele-code">HTML</div>
                      <div class="ele-sign">标识</div>
                      <div class="ele-name">标识名称</div>
                      <div class="ele-default">默认值</div>
                      <div class="ele-type">类型</div>
                      <div class="ele-select">下拉框</div>
                      <div class="ele-group">分类</div>
                    </div>
                    <div class="ele-body">
                      <div class="ele-code card-scroll" id="ele-html">
                          <!-- 代码编辑 -->
                      </div>
                      <div class="ele-list card-scroll">
                        <div class="ele-item" ng-repeat="item in vm.detailInfo.html_styles track by $index">
                            <div class="ele-sign">{{item.key}}</div>
                            <div class="ele-name">
                              <input type="text" ng-model="item.name" placeholder="标识名称"/>
                            </div>
                            <div class="ele-default">
                              <input type="text" ng-model="item.value" placeholder="默认值">
                            </div>
                            <div class="ele-type">
                              <div class="btn-group dropdown select-drop hoge-dropdown">
                                  <button class="btn btn-sm dropdown-toggle" data-toggle="dropdown">
                                      <span class="dropdown-label">{{item.newType.name}}</span>
                                      <span class="caret"></span>
                                  </button>
                                  <div class="dropdown-menu text-left text-sm">
                                      <a class="dropdown-item" ng-repeat="type in vm.styleTypeList" ng-click="vm.selectedStyleType(item, type)">{{type.name}}</a>
                                  </div>
                              </div>
                            </div>
                            <div class="ele-select">
                                <!-- start -->
                                <div class="list-drop-content" ng-if="item.newType.type === 4">
                                    <div class="toggle-drop">
                                        <span class="toggle-drop-txt">{{item.select[0].name}}</span>
                                        <span class="list-drop-span" ng-if="item.isShow"> 
                                            <span ng-click="vm.toggleShow(item)">收起</span>
                                                <div class="list-drop-box">
                                                    <div class="box-color text-color pos-rlt">
                                                        <span class="arrow bottom b-white"></span>
                                                        <div class="box-body">
                                                            <div class="box-body-content">
                                                                <span class="select-span"  ng-repeat="(key,vv) in item.select track by $index">
                                                                    <input  type="text"  class="select-input-list" ng-model="vv.name" ng-focus="vv.focusDrop = true"
                                                                            ng-class="{'focus-color':vv.focusDrop,'focus-index':vv.focusDrop}" placeholder="请输入name" ng-blur="vv.focusDrop = false">
                                                                    <input type="text"  class="select-input-list" ng-model="vv.value" ng-focus="vv.focusDropValue = true"
                                                                            ng-class="{'focus-color':vv.focusDropValue,'focus-index':vv.focusDropValue}"  placeholder="请输入value" ng-blur="vv.focusDropValue = false">
                                                                    <button class="hoge-common-btn btn" ng-click="vm.deleteSelect(item, key)">删除</button>
                                                                </span>
                                                                <div class="add-form-select" ng-click="vm.addSelected(item)">
                                                                    <span class="add-icon"><i class="fa typeface-form_zengjia"></i></span>
                                                                    <span class="add-tex" >添加数据</span>
                                                                </div>
                                                            </div>
                                                            <div class="box-body-bottom">
                                                                <button class="btn btn-purple" ng-click="vm.toggleShow(item)">保存</button>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </span>
                                        </span>
                                        <span ng-click="vm.toggleShow(item)" class="list-drop-span" ng-if="!item.isShow">展开</span>
                                    </div>
                                </div>
                                <!-- end -->
                            </div>
                            <div class="ele-group">
                              <div class="btn-group dropdown select-drop hoge-dropdown">
                                  <button class="btn btn-sm dropdown-toggle" data-toggle="dropdown">
                                      <span class="dropdown-label">{{item.category.name}}</span>
                                      <span class="caret"></span>
                                  </button>
                                  <div class="dropdown-menu text-left text-sm">
                                      <a class="dropdown-item" ng-repeat="group in vm.styleCategoryList" ng-click="vm.selectedStyleCategory(item, group)">{{group.name}}</a>
                                  </div>
                              </div>
                            </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <!-- css编辑框 -->
                  <div class="ele-box">
                      <div class="ele-header">
                        <div class="ele-code">CSS</div>
                        <div class="ele-sign">标识</div>
                        <div class="ele-name">标识名称</div>
                        <div class="ele-default">默认值</div>
                        <div class="ele-type">类型</div>
                        <div class="ele-select">下拉框</div>
                        <div class="ele-group">分组</div>
                      </div>
                      <div class="ele-body card-scroll">
                        <div class="ele-code" id="ele-css">
                            <!-- 代码编辑 -->
                        </div>
                        <div class="ele-list card-scroll">
                            <div class="ele-item" ng-repeat="item in vm.detailInfo.css_styles">
                                <div class="ele-sign">{{item.key}}</div>
                                <div class="ele-name">
                                    <input type="text" ng-model="item.name" placeholder="标识名称"/>
                                </div>
                                <div class="ele-default">
                                    <input type="text" ng-model="item.value" placeholder="默认值">
                                </div>
                                <div class="ele-type">
                                    <div class="btn-group dropdown select-drop hoge-dropdown">
                                        <button class="btn btn-sm dropdown-toggle" data-toggle="dropdown">
                                            <span class="dropdown-label">{{item.newType.name}}</span>
                                            <span class="caret"></span>
                                        </button>
                                        <div class="dropdown-menu text-left text-sm">
                                            <a class="dropdown-item" ng-repeat="type in vm.styleTypeList" ng-click="vm.selectedStyleType(item, type)">{{type.name}}</a>
                                        </div>
                                    </div>
                                </div>
                                <div class="ele-select">
                                    <div class="list-drop-content" ng-if="item.newType.type === 4">
                                        <div class="toggle-drop">
                                            <span class="toggle-drop-txt">{{item.select[0].name}}</span>
                                            <span class="list-drop-span" ng-if="item.isShow"> 
                                                <span ng-click="vm.toggleShow(item)">收起</span>
                                                    <div class="list-drop-box">
                                                        <div class="box-color text-color pos-rlt">
                                                            <span class="arrow bottom b-white"></span>
                                                            <div class="box-body">
                                                                <div class="box-body-content">
                                                                    <span class="select-span"  ng-repeat="(key,vv) in item.select track by $index">
                                                                        <input  type="text"  class="select-input-list" ng-model="vv.name" ng-focus="vv.focusDrop = true"
                                                                                ng-class="{'focus-color':vv.focusDrop,'focus-index':vv.focusDrop}" placeholder="请输入name" ng-blur="vv.focusDrop = false">
                                                                        <input type="text"  class="select-input-list" ng-model="vv.value" ng-focus="vv.focusDropValue = true"
                                                                                ng-class="{'focus-color':vv.focusDropValue,'focus-index':vv.focusDropValue}"  placeholder="请输入value" ng-blur="vv.focusDropValue = false">
                                                                        <button class="hoge-common-btn btn" ng-click="vm.deleteSelect(item, key)">删除</button>
                                                                    </span>
                                                                    <div class="add-form-select" ng-click="vm.addSelected(item)">
                                                                        <span class="add-icon"><i class="fa typeface-form_zengjia"></i></span>
                                                                        <span class="add-tex" >添加数据</span>
                                                                    </div>
                                                                </div>
                                                                <div class="box-body-bottom">
                                                                    <button class="btn btn-purple" ng-click="vm.toggleShow(item)">保存</button>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </span>
                                            </span>
                                            <span ng-click="vm.toggleShow(item)" class="list-drop-span" ng-if="!item.isShow">展开</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="ele-group">
                                    <div class="btn-group dropdown select-drop hoge-dropdown">
                                        <button class="btn btn-sm dropdown-toggle" data-toggle="dropdown">
                                            <span class="dropdown-label">{{item.category.name}}</span>
                                            <span class="caret"></span>
                                        </button>
                                        <div class="dropdown-menu text-left text-sm">
                                            <a class="dropdown-item" ng-repeat="group in vm.styleCategoryList" ng-click="vm.selectedStyleCategory(item, group)">{{group.name}}</a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                      </div>
                  </div>
                  <!-- js编辑 -->
                  <div class="ele-box">
                      <div class="ele-header">
                        <div class="ele-code">JavaScript</div>
                        <div class="ele-sign">标识</div>
                        <div class="ele-name">标识名称</div>
                        <div class="ele-default">默认值</div>
                        <div class="ele-type">类型</div>
                        <div class="ele-select">下拉框</div>
                        <div class="ele-group">分组</div>
                      </div>
                      <div class="ele-body card-scroll">
                        <div class="ele-code" id="ele-js">
                            <!-- 代码编辑 -->
                        </div>
                        <div class="ele-list card-scroll">
                            <div class="ele-item" ng-repeat="item in vm.detailInfo.js_styles">
                                <div class="ele-sign">{{item.key}}</div>
                                <div class="ele-name">
                                    <input type="text" ng-model="item.name" placeholder="标识名称"/>
                                </div>
                                <div class="ele-default">
                                    <input type="text" ng-model="item.value" placeholder="默认值">
                                </div>
                                <div class="ele-type">
                                    <div class="btn-group dropdown select-drop hoge-dropdown">
                                        <button class="btn btn-sm dropdown-toggle" data-toggle="dropdown">
                                            <span class="dropdown-label">{{item.newType.name}}</span>
                                            <span class="caret"></span>
                                        </button>
                                        <div class="dropdown-menu text-left text-sm">
                                            <a class="dropdown-item" ng-repeat="type in vm.styleTypeList" ng-click="vm.selectedStyleType(item, type)">{{type.name}}</a>
                                        </div>
                                    </div>
                                </div>
                                <div class="ele-select">
                                    <div class="list-drop-content" ng-if="item.newType.type === 4">
                                        <div class="toggle-drop">
                                            <span class="toggle-drop-txt">{{item.select[0].name}}</span>
                                            <span class="list-drop-span" ng-if="item.isShow"> 
                                                <span ng-click="vm.toggleShow(item)">收起</span>
                                                    <div class="list-drop-box">
                                                        <div class="box-color text-color pos-rlt">
                                                            <span class="arrow bottom b-white"></span>
                                                            <div class="box-body">
                                                                <div class="box-body-content">
                                                                    <span class="select-span"  ng-repeat="(key,vv) in item.select track by $index">
                                                                        <input  type="text"  class="select-input-list" ng-model="vv.name" ng-focus="vv.focusDrop = true"
                                                                                ng-class="{'focus-color':vv.focusDrop,'focus-index':vv.focusDrop}" placeholder="请输入name" ng-blur="vv.focusDrop = false">
                                                                        <input type="text"  class="select-input-list" ng-model="vv.value" ng-focus="vv.focusDropValue = true"
                                                                                ng-class="{'focus-color':vv.focusDropValue,'focus-index':vv.focusDropValue}"  placeholder="请输入value" ng-blur="vv.focusDropValue = false">
                                                                        <button class="hoge-common-btn btn" ng-click="vm.deleteSelect(item, key)">删除</button>
                                                                    </span>
                                                                    <div class="add-form-select" ng-click="vm.addSelected(item)">
                                                                        <span class="add-icon"><i class="fa typeface-form_zengjia"></i></span>
                                                                        <span class="add-tex" >添加数据</span>
                                                                    </div>
                                                                </div>
                                                                <div class="box-body-bottom">
                                                                    <button class="btn btn-purple" ng-click="vm.toggleShow(item)">保存</button>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </span>
                                            </span>
                                            <span ng-click="vm.toggleShow(item)" class="list-drop-span" ng-if="!item.isShow">展开</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="ele-group">
                                    <div class="btn-group dropdown select-drop hoge-dropdown">
                                        <button class="btn btn-sm dropdown-toggle" data-toggle="dropdown">
                                            <span class="dropdown-label">{{item.category.name}}</span>
                                            <span class="caret"></span>
                                        </button>
                                        <div class="dropdown-menu text-left text-sm">
                                            <a class="dropdown-item" ng-repeat="group in vm.styleCategoryList" ng-click="vm.selectedStyleCategory(item, group)">{{group.name}}</a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                      </div>
                  </div>
              </div>
          </div>
          <div class="md-form-group">
              <button class="pull-right btn cancel-btn ng-binding" style="margin-right: 294px;margin-left: 16px;" ng-click="vm.cancel()">取消</button>
              <button class="pull-right btn primary-btn ng-binding" ng-click="vm.saveDate()" ng-if="vm.id">更新</button>
              <button class="pull-right btn primary-btn ng-binding" ng-click="vm.saveDate()" ng-if="!vm.id">保存</button>
          </div>
      </div>
  </div>
</div>