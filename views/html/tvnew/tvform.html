<main class="main-form-wrap article-form-wrap" my-loading="vm.info_loading">
    <nav class="hoge-nav">
        <div class="hoge-table-add">
            <div class="hoge-edit-head">
                <div class="hoge-return-body" ng-if="vm.noEdit == 'topic'" onclick="history.go(-1)">
                    <i class="fa typeface-menu_fanhuiliebiao" ></i>
                    <span class="return-tip">返回专题</span>
                </div>
                <div ng-if="vm.noEdit !='topic' && !vm.hotFlag && !vm.publishFlag && !vm.commentFlag && !vm.reviewFlag" class="hoge-return-body" ui-sref="app.content.menu.list({type:'article',page:vm.pageCount,per_num:vm.pageSize,title:vm.listSearch, hideSynergyKind: vm.hideAccessKind ? true : null, project_id: vm.listProjectId ? vm.listProjectId : null, project_title: vm.listProjectTitle ? vm.listProjectTitle : null,article_type:vm.moduleType,status:vm.moduleStatus, access_token: vm.access_token, category_id:vm.category_id})">
                    <i class="fa typeface-menu_fanhuiliebiao" ></i>
                    <span class="return-tip">返回列表</span>
                </div>
                <div ng-if="vm.hotFlag" class="hoge-return-body" ui-sref="app.hot.menu.list({page:vm.pageCount,per_num:vm.pageSize,hideSynergyKind: vm.hideAccessKind ? true : null, project_id: vm.listProjectId ? vm.listProjectId : null, project_title: vm.listProjectTitle ? vm.listProjectTitle : null})">
                    <i class="fa typeface-menu_fanhuiliebiao" ></i>
                    <span class="return-tip">返回列表</span>
                </div>
                <div ng-if="vm.publishFlag" class="hoge-return-body" ui-sref="app.publish.menu.list({page:vm.pageCount,per_num:vm.pageSize,type:vm.publishType, hideSynergyKind: vm.hideAccessKind ? true : null, column_id:vm.column_id})">
                    <i class="fa typeface-menu_fanhuiliebiao" ></i>
                    <span class="return-tip">返回列表</span>
                </div>
                <div ng-if="vm.commentFlag" class="hoge-return-body" ui-sref="app.comment.list({title:vm.listSearch, hideSynergyKind: vm.hideAccessKind ? true : null, project_id: vm.listProjectId ? vm.listProjectId : null, project_title: vm.listProjectTitle ? vm.listProjectTitle : null})">
                    <i class="fa typeface-menu_fanhuiliebiao" ></i>
                    <span class="return-tip">返回列表</span>
                </div>
                <div ng-if="vm.reviewFlag" class="hoge-return-body" ui-sref="app.content.review.list({page:vm.pageCount,per_num:vm.pageSize,type:vm.reviewType, hideSynergyKind: vm.hideAccessKind ? true : null})">
                    <i class="fa typeface-menu_fanhuiliebiao" ></i>
                    <span class="return-tip">返回列表</span>
                </div>
                <em ng-if="!vm.hotFlag&&!vm.isPreviewCre && vm.noEdit != 'topic'">{{vm.param.id?'编辑':'新建'}}电视稿</em>
                <em ng-if="vm.isPreviewCre && vm.noEdit != 'topic'">预览电视稿</em>
                <em ng-if="vm.hotFlag || vm.noEdit == 'topic'">阅读模式</em>
                <span ng-show="vm.draftLoading" style="color:  #a5a5a5;">
                    <img src="../assets/images/mxu/news/loading.gif" alt="">
                    正在保存
                </span>
                <span ng-show="vm.draftLoadingOn" style="color:  #a5a5a5;">
                    <i class="typeface-alert_wancheng2"> </i>
                    已保存
                </span>
               <!-- 徐瑞start -->
                <!-- 新建 -->
                <div class="tv-process-width-status" ng-show="!vm.param.id">
                    <span class="content-pendingAudit padding-r-w">待审核</span>
                    <span class="process-span" ng-click="vm.chooseProcess()">{{vm.is_show_process ? '已选审核流程': '选择流程'}}</span>
                    <div class="process-data-box new-process-data-box" ng-if="vm.showProcessBox">
                        <div class="step-nav-box">
                            <span class="nav-box nav-title">已选流程&nbsp;&nbsp;(保存后生效)</span>
                            <span class="nav-box nav-btn-re-election" ng-click="vm.reElectionProcess()">重选</span>
                            <span class="nav-box nav-btn-clear" ng-click="vm.clearProcess()">清空</span>
                        </div>
                        <div class="step-box" ng-repeat="(stepIndex,stepItem) in vm.pro_list.nodes">
                            <span class="step-name-box">{{stepItem.rangeName}}</span>
                            <div class="flex-item">
                                <div class="step-img-box" ng-style="{'min-width': stepItem.range != 0 && 50+'px' ,'width': (stepItem.users.length > 0 && stepItem.users.length *30+'px') || (stepItem.role_departments.length > 0 && stepItem.role_departments.length *30+'px')}">
                                    <img class="avatar-34 usual-img" src="/assets/images/mxu/review/shengao_head_quanbuyonghu@2x.png" alt="" ng-if="stepItem.range==1">
                                    <!-- <div class="role-img" ng-style="{'min-width': node.range != 0 && 50+'px' ,'width': (node.users.length > 0 && node.users.length *30+'px') || (node.role_departments.length > 0 && node.role_departments.length *30+'px')}"> -->

                                    <div class="user-one no-avatar-bg{{idx}}" ng-repeat="(idx,userItem) in stepItem.users" ng-style="{'left':idx*25+'px'}" ng-if="idx <= 2">
                                        <span class="avatar-34 no-avatar " ng-if="!userItem.avatar"></span>
                                        <img class="avatar-34" ng-src="{{userItem.avatar}}" alt="" ng-if="userItem.avatar">
                                        <!-- <img class="avatar-34" ng-src="userItem.avatar" alt="" ng-if="userItem.avatar"> -->
                                        <span>{{userItem.name}}</span>
                                    </div>
                                    <div class="user-range-3" ng-style="{'left':idx*25+'px'}" ng-if="stepItem.range==3" ng-repeat="(idx,userItem) in stepItem.role_departments">
                                        <img class="avatar-34" src="/assets/images/mxu/review/shengao_head_bumenjuese@2x.png">
                                    </div>
                                    <span class="overflow-user" ng-if="stepItem.users.length >= 4">
                                        <i class="typeface-form_zengjia fa"></i>
                                        <span class="overflow-num">{{stepItem.users.length - 3}}</span>                       
                                    </span>
                                </div>
                                <div class="role-arrow" ng-if="stepIndex != (vm.processData.nodes.length - 1)">
                                    <i class="typeface-shengao_xiayige"></i>
                                </div>
                            </div>
                            
                        </div>
                    </div>
                </div>
                <!-- 编辑 -->
                <div class="tv-process-width-status" ng-show="vm.param.id && vm.create_user_name == vm.user_name">
                    <span class="process-span" ng-if="vm.editStatus==1 && !vm.auditId" ng-click="vm.chooseProcess()">{{vm.is_show_process ? '已选审核流程': '选择流程'}}</span>
                    <div class="process-data-box" ng-if="vm.showProcessBox">
                        <div class="step-nav-box">
                            <span class="nav-box nav-title">已选流程&nbsp;&nbsp;(保存后生效)</span>
                            <span class="nav-box nav-btn-re-election" ng-click="vm.reElectionProcess()">重选</span>
                            <span class="nav-box nav-btn-clear" ng-click="vm.clearProcess()">清空</span>
                        </div>
                        <div class="step-box" ng-repeat="(stepIndex,stepItem) in vm.pro_list.nodes">
                            <span class="step-name-box">{{stepItem.rangeName}}</span>
                            <div class="flex-item">
                                <div class="step-img-box" ng-style="{'min-width': stepItem.range != 0 && 50+'px' ,'width': (stepItem.users.length > 0 && stepItem.users.length *30+'px') || (stepItem.role_departments.length > 0 && stepItem.role_departments.length *30+'px')}">
                                    <img class="avatar-34 usual-img" src="/assets/images/mxu/review/shengao_head_quanbuyonghu@2x.png" alt="" ng-if="stepItem.range==1">
                                    <!-- <div class="role-img" ng-style="{'min-width': node.range != 0 && 50+'px' ,'width': (node.users.length > 0 && node.users.length *30+'px') || (node.role_departments.length > 0 && node.role_departments.length *30+'px')}"> -->

                                    <div class="user-one no-avatar-bg{{idx}}" ng-repeat="(idx,userItem) in stepItem.users" ng-style="{'left':idx*25+'px'}" ng-if="idx <= 2">
                                        <span class="avatar-34 no-avatar " ng-if="!userItem.avatar"></span>
                                        <img class="avatar-34" ng-src="{{userItem.avatar}}" alt="" ng-if="userItem.avatar">
                                        <!-- <img class="avatar-34" ng-src="userItem.avatar" alt="" ng-if="userItem.avatar"> -->
                                        <span>{{userItem.name}}</span>
                                    </div>
                                    <div class="user-range-3" ng-style="{'left':idx*25+'px'}" ng-if="stepItem.range==3" ng-repeat="(idx,userItem) in stepItem.role_departments">
                                        <img class="avatar-34" src="/assets/images/mxu/review/shengao_head_bumenjuese@2x.png">
                                    </div>
                                    <span class="overflow-user" ng-if="stepItem.users.length >= 4">
                                        <i class="typeface-form_zengjia fa"></i>
                                        <span class="overflow-num">{{stepItem.users.length - 3}}</span>                       
                                    </span>
                                </div>
                                <div class="role-arrow" ng-if="stepIndex != (vm.processData.nodes.length - 1)">
                                    <i class="typeface-shengao_xiayige"></i>
                                </div>
                            </div>
                            
                        </div>
                    </div>
                </div>
                <!-- end-->
                <!-- 王亚让改的 所有从发布库进去的都直接显示已发布且不可点击 -->
                <div class="edit-width-status" ng-if="vm.param.id && vm.publishFlag">
                    <span class="content-audited">已发布</span>
                </div>
                <div class="edit-width-status" ng-class="{'other-edit-width-status': vm.editStatus!=1 || vm.create_user_name != vm.user_name}" ng-show="vm.param.id && !vm.publishFlag">
                    <!-- <span class="content-pendingAudit" ng-if="vm.editStatus==1">待审核</span>
                    <span class="content-audited" ng-if="vm.editStatus==2">已审核</span>
                    <span class="label primary m-l-sm light-green-200" ng-if="nor.status==3" translate="content.release">已发布</span>
                    <span class="content-repulsed" ng-if="vm.editStatus==4">已打回</span>
                    <span class="content-repulsed" ng-if="vm.editStatus==5">审核中</span> -->
                    <span class="content-pendingAudit" ng-if="vm.editStatus==1 && !vm.auditId">待审核</span>
                    <span class="content-audited" ng-if="vm.editStatus==2">已审核</span>
                    <span class="content-audited" ng-if="vm.editStatus==3" translate="content.release">已发布</span>
                    <span class="content-repulsed" ng-if="vm.editStatus==4">已打回</span>
                    <span class="content-repulsed" ng-if="vm.editStatus==9">待发布</span>
                    <span class="content-repulsed" ng-if="vm.editStatus==5 || (vm.editStatus==1 && vm.auditId)">审核中</span>
                    <span class="triangle-btn status-btn" ng-style="{borderTopColor: (vm.editStatus == 2 || vm.editStatus == 3) ? '#42a65a' : '#f1453d'}" ng-class="{'audited-green': vm.editStatus==2}" ng-if="(vm.editStatus==5 || (vm.editStatus==1 && vm.auditId) || vm.editStatus==2 || vm.editStatus==3 || vm.editStatus==4 || vm.editStatus==9) && vm.auditId" ng-click="vm.toggleShowAudit()"></span>
                    <div class="audit-contain" ng-if="vm.showAudit">
                        <div class="audit-top">
                            <button class="tog-btn" ng-click="vm.toggleLog(1)" ng-class="{'active': !vm.showLog}">基本信息</button>
                            <button class="tog-btn posi" ng-click="vm.toggleLog(2)" ng-class="{'active': vm.showLog}">审稿日志</button>
                        </div>
                        <div class="audit-mid" ng-if="!vm.showLog">
                            <div class="mid-top">
                                <span class="cur-pro">当前进度(<span ng-if="vm.editStatus==5 || (vm.editStatus==1 && vm.auditId)">{{vm.currentTvProgress}}级审核</span><span ng-if="vm.editStatus==2 || vm.editStatus==3">审核完成</span><span ng-if="vm.editStatus==4">已打回</span><span ng-if="vm.editStatus==9">待发布</span>)</span>
                                <span class="full-pro" ng-click="vm.showFullProcess()">完整流程</span>
                                <div class="right-div" ng-if="vm.showRightDiv">
                                    <div class="box"></div>
                                    <div class="process-nodes">
                                        <div class="node-item" ng-repeat="(ndx,node) in vm.processData.nodes">
                                            <div class="node-main">
                                                <div class="node-name" ng-if="node.user.name">{{node.user.name}}</div>
                                                <div class="node-name" ng-if="(node.range == 1 || node.range == 2 || node.range == 3) && !node.user.name">
                                                    <span ng-if="node.range == 2">指定用户</span>
                                                    <span ng-if="node.range == 1">全体用户</span>
                                                    <span ng-if="node.range == 3">部门角色</span>
                                                    <img class="branch" ng-if="node.range == 3" src="/assets/images/mxu/review/icon_bumenjuese@2x.png" alt="">
                                                    <span class="content-repulsed" ng-if="node.isAuditing">审核中</span>
                                                </div>
                                                <div class="node-role flex-item">
                                                    <div class="role-img" ng-style="{'min-width': node.range != 0 && 50+'px' ,'width': (node.users.length > 0 && node.users.length *30+'px') || (node.role_departments.length > 0 && node.role_departments.length *30+'px')}">
                                                        <img class="avatar-34 usual-img" src="/assets/images/mxu/review/shengao_head_quanbuyonghu@2x.png" alt="" ng-if="node.range==1">
                                                        <div class="user-img-box" ng-if="node.range==2" >
                                                            <div class="hoge-tip-arrow avatar-34 usual-img" ng-repeat="(idx,user) in node.users | limitTo:3"
                                                                ng-style="{'left':idx*25+'px'}">
                                                                <img class="avatar-34" ng-src="{{user.avatar}}" ng-if="user.avatar">
                                                                <i class="typeface-dropdown_xuanze audit-pass" ng-if="node.hasPass"></i>
                                                                <i class="typeface-form_guanbi audit-back" ng-if="node.isBlocked"></i>
                                                                <span class="avatar-34 no-avatar no-avatar-bg{{user.bgColor}}"  ng-if="!user.avatar">{{user.avatarName}}</span>
                                                                <div class="box-color text-color pos-rlt" ng-style="{'width': user.name.length * 13+'px','left': user.name.length> 3 && (-(user.name.length -3)*4) -2 + 'px'}">
                                                                    <span class="arrow bottom b-white"></span>
                                                                    <div class="box-body">{{user.name}}</div>
                                                                </div>
                                                            </div>
                                                            <span class="overflow-user" ng-if="node.users.length >= 4">
                                                                <i class="typeface-form_zengjia fa"></i>
                                                                <span class="overflow-num">{{node.users.length-3}}</span>
                                                            </span>
                                                        </div>
                                                        <div class="hoge-tip-arrow avatar-34 usual-img" ng-style="{'left':idx*25+'px'}" ng-if="node.range==3" ng-repeat="(idx,user) in node.role_departments">
                                                            <img class="avatar-34" src="/assets/images/mxu/review/shengao_head_bumenjuese@2x.png">
                                                            <div class="box-color text-color pos-rlt" ng-style="{'width': user.role.name.length * 13+'px','left': user.role.name.length> 3 && (-(user.role.name.length -3)*4) -2 + 'px' }">
                                                                <span class="arrow bottom b-white"></span>
                                                                <div class="box-body">{{user.role.name}}</div>
                                                            </div>
                                                        </div>
                                                        <div class="avatar-34 ellipsis-box" ng-if=" node.range == 0">
                                                            <i class="typeface-list_caozuo"></i>
                                                        </div>
                                                    </div>
                                                    <div class="role-arrow"ng-if="$index != (vm.processData.nodes.length - 1)">
                                                        <i class="typeface-shengao_xiayige"></i>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="bottom-div" ng-if="vm.showBottomDiv">
                                    <div class="box"></div>
                                    <div class="process-nodes">
                                        <div class="node-item" ng-repeat="(ndx,node) in vm.processData.nodes">
                                            <div class="node-main">
                                                <div class="node-name" ng-if="node.user.name">{{node.user.name}}</div>
                                                <div class="node-name" ng-if="(node.range == 1 || node.range == 2 || node.range == 3) && !node.user.name">
                                                    <span ng-if="node.range == 2">指定用户</span>
                                                    <span ng-if="node.range == 1">全体用户</span>
                                                    <span ng-if="node.range == 3">部门角色</span>
                                                    <img class="branch" ng-if="node.range == 3" src="/assets/images/mxu/review/icon_bumenjuese@2x.png" alt="">
                                                    <span class="content-repulsed" ng-if="node.isAuditing">审核中</span>
                                                </div>
                                                <div class="node-role flex-item">
                                                    <div class="role-img" ng-style="{'min-width': node.range != 0 && 50+'px' ,'width': (node.users.length > 0 && node.users.length *30+'px') || (node.role_departments.length > 0 && node.role_departments.length *30+'px')}">
                                                        <img class="avatar-34 usual-img" src="/assets/images/mxu/review/shengao_head_quanbuyonghu@2x.png" alt="" ng-if="node.range==1">
                                                        <div class="user-img-box" ng-if="node.range==2" >
                                                            <div class="hoge-tip-arrow avatar-34 usual-img" ng-repeat="(idx,user) in node.users | limitTo:3"
                                                                ng-style="{'left':idx*25+'px'}">
                                                                <img class="avatar-34" ng-src="{{user.avatar}}" ng-if="user.avatar">
                                                                <i class="typeface-dropdown_xuanze audit-pass" ng-if="node.hasPass"></i>
                                                                <i class="typeface-form_guanbi audit-back" ng-if="node.isBlocked"></i>
                                                                <span class="avatar-34 no-avatar no-avatar-bg{{user.bgColor}}"  ng-if="!user.avatar">{{user.avatarName}}</span>
                                                                <div class="box-color text-color pos-rlt" ng-style="{'width': user.name.length * 13+'px','left': user.name.length> 3 && (-(user.name.length -3)*4) -2 + 'px'}">
                                                                    <span class="arrow bottom b-white"></span>
                                                                    <div class="box-body">{{user.name}}</div>
                                                                </div>
                                                            </div>
                                                            <span class="overflow-user" ng-if="node.users.length >= 4">
                                                                <i class="typeface-form_zengjia fa"></i>
                                                                <span class="overflow-num">{{node.users.length-3}}</span>
                                                            </span>
                                                        </div>
                                                        <div class="hoge-tip-arrow avatar-34 usual-img" ng-style="{'left':idx*25+'px'}" ng-if="node.range==3" ng-repeat="(idx,user) in node.role_departments">
                                                            <img class="avatar-34" src="/assets/images/mxu/review/shengao_head_bumenjuese@2x.png">
                                                            <div class="box-color text-color pos-rlt" ng-style="{'width': user.role.name.length * 13+'px','left': user.role.name.length> 3 && (-(user.role.name.length -3)*4) -2 + 'px' }">
                                                                <span class="arrow bottom b-white"></span>
                                                                <div class="box-body">{{user.role.name}}</div>
                                                            </div>
                                                        </div>
                                                        <div class="avatar-34 ellipsis-box" ng-if=" node.range == 0">
                                                            <i class="typeface-list_caozuo"></i>
                                                        </div>
                                                    </div>
                                                    <div class="role-arrow"ng-if="$index != (vm.processData.nodes.length - 1)">
                                                        <i class="typeface-shengao_xiayige"></i>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="process-nodes">
                                <div class="node-item" ng-repeat="(ndx,node) in vm.currentNodes">
                                    <div class="node-main">
                                        <div class="node-name" ng-if="node.user.name">{{node.user.name}}</div>
                                        <div class="node-name" ng-if="(node.range == 1 || node.range == 2 || node.range == 3) && !node.user.name">
                                            <span ng-if="node.range == 2">指定用户</span>
                                            <span ng-if="node.range == 1">全体用户</span>
                                            <span ng-if="node.range == 3">部门角色</span>
                                            <img class="branch" ng-if="node.range == 3" src="/assets/images/mxu/review/icon_bumenjuese@2x.png" alt="">
                                            <span class="content-repulsed" ng-if="node.isAuditing">审核中</span>
                                        </div>
                                        <div class="node-role flex-item">
                                            <div class="role-img" ng-style="{'min-width': node.range != 0 && 50+'px' ,'width': (node.users.length > 0 && node.users.length *30+'px') || (node.role_departments.length > 0 && node.role_departments.length *30+'px')}">
                                                <img class="avatar-34 usual-img" src="/assets/images/mxu/review/shengao_head_quanbuyonghu@2x.png" alt="" ng-if="node.range==1">
                                                <div class="user-img-box" ng-if="node.range==2" >
                                                    <div class="hoge-tip-arrow avatar-34 usual-img" ng-repeat="(idx,user) in node.users | limitTo:3"
                                                        ng-style="{'left':idx*25+'px'}">
                                                        <i class="typeface-dropdown_xuanze audit-pass" ng-if="node.hasPass"></i>
                                                        <i class="typeface-form_guanbi audit-back" ng-if="node.isBlocked"></i>
                                                        <img class="avatar-34" ng-src="{{user.avatar}}" ng-if="user.avatar">
                                                        <span class="avatar-34 no-avatar no-avatar-bg{{user.bgColor}}"  ng-if="!user.avatar">{{user.avatarName}}</span>
                                                        <div class="box-color text-color pos-rlt" ng-style="{'width': user.name.length * 13+'px','left': user.name.length> 3 && (-(user.name.length -3)*4) -2 + 'px'}">
                                                            <span class="arrow bottom b-white"></span>
                                                            <div class="box-body">{{user.name}}</div>
                                                        </div>
                                                    </div>
                                                    <span class="overflow-user" ng-if="node.users.length >= 4">
                                                        <i class="typeface-form_zengjia fa"></i>
                                                        <span class="overflow-num">{{node.users.length-3}}</span>
                                                    </span>
                                                </div>
                                                <div class="hoge-tip-arrow avatar-34 usual-img" ng-style="{'left':idx*25+'px'}" ng-if="node.range==3" ng-repeat="(idx,user) in node.role_departments">
                                                    <img class="avatar-34" src="/assets/images/mxu/review/shengao_head_bumenjuese@2x.png">
                                                    <div class="box-color text-color pos-rlt" ng-style="{'width': user.role.name.length * 13+'px','left': user.role.name.length> 3 && (-(user.role.name.length -3)*4) -2 + 'px' }">
                                                        <span class="arrow bottom b-white"></span>
                                                        <div class="box-body">{{user.role.name}}</div>
                                                    </div>
                                                </div>
                                                <div class="avatar-34 ellipsis-box" ng-if=" node.range == 0">
                                                    <i class="typeface-list_caozuo"></i>
                                                </div>
                                            </div>
                                            <div class="role-arrow" ng-if="node.hasNext">
                                                <i class="typeface-shengao_xiayige"></i>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="mid-bottom">
                                <div class="title">稿件评论({{vm.commentList.length}})</div>
                                <div class="content">
                                    <div class="no-data" ng-if="!vm.commentList.length && !vm.commentLoading">
                                        <div>
                                            <img class="no-data-img" src="/assets/images/mxu/review/img_nothing@2x.png" alt="">
                                            <p class="text">暂无评论</p>
                                        </div>
                                    </div>
                                    <div class="item" ng-repeat="comment in vm.commentList track by $index">
                                        <img class="image" ng-src="{{comment.user.avatar}}" ng-if="comment.user.avatar" alt="">
                                        <span class="image no-avatar-bg{{comment.user.bgColor}}" ng-if="!comment.user.avatar">{{comment.user.avatarName}}</span>
                                        <div class="name">
                                            <span>{{comment.user.name}}</span>
                                            <span class="time">{{comment.time}}</span>
                                        </div>
                                        <p class="comment">{{comment.content}}</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="audit-bottom" ng-if="!vm.showLog">
                            <input type="text" class="bottom-input" ng-model="vm.comment" placeholder="输入评论">
                            <button class="primary-btn" ng-click="vm.setComment()">确定</button>
                        </div>
                        <div class="audit-mid" ng-if="vm.showLog">
                            <div class="no-data" ng-if="!vm.logList.length && !vm.logLoading">暂无数据</div>
                            <div class="log-item" ng-repeat="log in vm.logList track by $index">
                                <p class="time">{{log.created_at}}</p>
                                <p class="operation">{{log.name}} {{log.operationName}} 了该稿件。<span ng-if="log.operation == 2">评论：{{log.reason}}</span></p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="history-dropdown" ng-show="vm.param.id">
                    <span ng-click="vm.compareHistroy()">
                        <a href id="simple-dropdown" uib-dropdown-toggle>
                          历史记录
                        </a>
                    </span>
                </div>
            </div>
        </div>
    </nav>
    <!-- <iframe id="iframe-con" frameborder="0"></iframe> -->
    <div class="form-content hoge-flex">
        <div>
            <workcall-front topic-array="vm.topicAssociated" topic-id="vm.topicId"></workcall-front>
            <aside class="left-aside hoge-radius">
                    <div class="draft-left hoge-radius">
                        <div class="side_form_fixed hoge-radius" style="z-index: 1001;">
                            <div class="hoge-border template-list" style="z-index: 1000;" scroll-aside>
                                <div class="toggle-header">
                                    <ul class="nav nav-tabs tv-nav">
                                        <li class="nav-item" ng-click="vm.otherTab()">
                                            <a class="nav-link active" data-toggle="tab" data-target="#attr">属性</a>
                                        </li>
                                        <li class="nav-item" ng-click="vm.otherTab()">
                                            <a class="nav-link" id="upload-toggle" data-toggle="tab" data-target="#material">附件</a>
                                        </li>
                                        <!-- <li class="nav-item" ng-click="vm.otherTab()">
                                            <a class="nav-link" id="upload-toggle" data-toggle="tab" data-target="#material">素材</a>
                                        </li>
                                        <li class="nav-item" ng-click="vm.getTemplateList()">
                                            <a class="nav-link " data-toggle="tab" data-target="#component">组件</a>
                                        </li> -->
                                    </ul>
                                </div>
                                <div class="tab-content">
                                    <div class="hoge-radius tab-pane animated fadeIn text-muted active" id="attr">
                                        <div class="rolling">
                                            <content-attr content-param="vm.contentParam" article-type="'tvarticle'" dropdown-show="vm.showDropdown" detail-category-name="vm.detailCategoryName" detail-column-name="vm.detailColumnName" is-previewcre="vm.isPreviewCre" cre-cloumn-name="vm.creCloumnName" open-base="vm.openBase"></content-attr>
                                        </div>
                                    </div>
                                    <div class="tab-pane animated fadeIn text-muted" id="material">
                                            <div class="news-resources">
                                                <div class="content">
                                                    <div class="side-no-data" ng-if="!vm.newsresources.length && !vm.loadding">
                                                        暂无附件
                                                    </div>
                                                    <div ng-repeat="v in vm.newsresources" class="resource-list" ng-if="vm.newsresources.length">
                                                        <div ng-if="v.isFail" class="error-list">
                                                            <div class="circle-progress">
                                                                <div class="circleChart" id="error_{{v.num}}"></div>
                                                            </div>
                                                            <div>
                                                                <span class="item-title">{{v.title}}</span>
                                                                <span class="fail-error">{{v.error_tip}}</span>
                                                            </div>    
                                                        </div>
                                                        <div ng-if="!v.preNewResourceisFail && !v.isRetry"  aria-expanded="false">
                                                            <div class="floorList-cb">
                                                                <div class="item-info">
                                                                    <div class="left-item" data-toggle="dropdown">
                                                                        <div class="circleChart" id="circle_{{v.num}}" ng-if="!v.success"></div>
                                                                        <img src="/assets/images/mxu/news/icon_wengaoziyuan_tuji@2x.png" alt="" ng-if="v.type=='gallery'&& v.success">
                                                                        <img src="/assets/images/mxu/news/icon_wengaoziyuan_yinpin@2x.png" alt="" ng-if="v.type=='audio'&& v.success">
                                                                        <img src="/assets/images/mxu/news/icon_wengaoziyuan_shipin@2x.png" alt="" ng-if="v.type=='video'&& v.success">
                                                                        <img src="/assets/images/mxu/news/icon_wengaoziyuan_fujian@2x.png" alt="" ng-if="v.type=='document'&& v.success">
                                                                        <img src="/assets/images/mxu/news/icon_wengaoziyuan_tupian@2x.png" alt="" ng-if="v.type=='image'&& v.success">
                                                                        <span class="item-title" title="{{v.title}}">{{v.title}}</span>
                                                                    </div>
                                                                    <!-- <span class="item-title">{{v.title}}</span> -->
                                                                        <div class="opera-list dropdown-menu dropdown-menu-scale pull-right">
                                                                        <a href="" class="drop-item" ng-click="vm.insertContent(v)" ng-if="v.success && v.type === 'document'">插入正文</a>
                                                                        <a href="" class="drop-item" ng-click="vm.downLoad(v)" ng-if="v.success && v.type !='gallery' && v.type === 'document'">下载</a>
                                                                        <!-- <a href="" class="drop-item border-preview" ng-if="v.success && v.type !='document'" ng-click="vm.preNewResource(v)">预览</a> -->
                                                                        <a href="" class="drop-item" ng-click="vm.deleteMedia(v)" ng-if="v.success">删除</a>  
                                                                    </div>
                                                                </div>
                                                                <div class="item-point" id="item-point" ng-if="v.type !== 'document'">
                                                                    <span class="point-span">入点:</span>
                                                                    <!-- ng-class="{'dirty-input': v.out_point !== '00:00'}"   下面input有个ng-class 不知道具体需求 先滞留 待增加 -->
                                                                    <input type="text" class="point-input" ng-model="v.enter_point" ng-focus="vm.recordPoint(v, 1)" ng-blur="vm.putPoint(v, 1)">
                                                                    <span class="point-span">出点:</span>
                                                                    <input type="text" class="point-input" ng-model="v.out_point" ng-focus="vm.recordPoint(v, 2)" ng-blur="vm.putPoint(v, 2)">
                                                                </div>
                                                            </div> 
                                                        </div>
                                                            <!-- <div class="opera-list dropdown-menu dropdown-menu-scale pull-right" >
                                                                <a href="" class="drop-item" ng-click="vm.insertHtml(v)" ng-if="v.success">插入正文</a>
                                                                <a href="" class="drop-item" ng-click="vm.downLoad(v)" ng-if="v.success && v.type !='gallery'">下载</a>
                                                                <a href="" class="drop-item border-preview" ng-if="v.success && v.type !='document'" ng-click="vm.preNewResource(v)">预览</a>
                                                                <a href="" class="drop-item" ng-click="vm.del(v)" ng-if="v.success">删除</a>  
                                                            </div> -->
                                                    </div>
                                                </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
        
                </aside>
        </div>
        
        <div class="edit-bg-tv" ng-class="{'phone-edit-bg':vm.mobile}">
            <div class="main-form-content" ng-class="{'phone-form-content':vm.mobile}">
                <!--padding-->
                <div class=" content" ng-class="{'phone-content':vm.mobile}">
                    <div class="draft-box" ng-if = "vm.isNew && vm.draftDown">
                        <span class="draft-tip">{{vm.draftTip}}</span>
                        <span class="draft-del" ng-if = "!vm.isDel" ng-click="vm.delDraft()">撤销</span>
                    </div>
                    <div class="content-form-title">
                        <div class="title-box edit-phone-title">
                            <!-- <input type="text" name="title" autocomplete="off"
                                   placeholder="请输入文稿标题" maxlength="60" ng-model="vm.title" ng-blur="vm.relevant('blur')"/> -->
                            <textarea type="text" name="title" autocomplete="off"
                                   placeholder="请输入电视稿标题" maxlength="60" ng-model="vm.title" ng-blur="vm.relevant('blur')"></textarea>

                            <content-title-tip tip-title="vm.title" top="0"></content-title-tip>
                        </div>
                    </div>
                    <div class="content-box">
                        <div class="ueditor-wrap" id="news-ueditor" ng-class="{'news-is-shrink':vm.showType ==1}">
                            <div class="editor-item"  my-loading="vm.editor_loading" scroll-tool>
                                <script ng-show="vm.ready_show" id="newsEditor" type="text/plain"></script>
                            </div>
                            <div id="morechose" class="down-more" style="display: none;">
                                <!--<div class="auto-save down-item">自动保存</div>-->
                                <div class="add-annex down-item" ng-click="vm.addAnnex();">添加附件</div>
                            </div>
                            <input  id="up-file" class="insert-vdo" style="display: none;" type="file" nv-file-select="" uploader="vm.attachmentloader"
                                    multiple/>
                            <input  id="up-file-word" class="insert-vdo" style="display: none;" type="file" nv-file-select="" uploader="vm.wordloader"/>

                        </div>
                    </div>
                </div>
                <div class="footer-btn-box" ng-show="!vm.mobile&&!vm.hotFlag&&!vm.isPreviewCre" style="position:relative;">
                <!-- <div class="footer-btn-box" ng-show="!vm.mobile&&!vm.hotFlag&&!vm.isPreviewCre"> -->
                    <div class="count-area" ng-show="vm.ready_show">
                      <div class="count-line"><span class="word-label">已选:</span><span class="word-count word-length">0</span></div>
                      <div class="count-line"><span  class="word-label">总字数:</span><span class="word-length">{{vm.counter || 0}}</span></div>
                    </div>
                    <button class="footer-btn save-btn can-event" ng-click="vm.save('saveAs')" ng-show='vm.param.id' ng-disabled="vm.clicked === '1'">另存为</button>
                    <button class="footer-btn save-btn" ng-click="vm.save('save')" ng-disabled="vm.clicked === '1' || vm.noEdit">保存</button>
                    <button class="footer-btn save-btn" ng-click="vm.save('saveAudit')" ng-disabled="vm.clicked === '1' || vm.noEdit" ng-if="vm.showZY">保存并提审</button>
                    <button class="footer-btn" ng-click="vm.cancelForm()">取消</button>
                </div>
                <!-- <content-save  handle-cancel="vm.cancelForm()" save="vm.save()" preview="vm.preview()" load="vm.save_loading" clicked="vm.clicked" is-show="false" show-type="vm.showType" type="vm.contentParam.urlType" id="vm.param.id" news-content="vm.newsInfo.content"> -->
            </div>
        </div>
        <a id="aid" download=""><span id="exportFile"></span></a>
        <writing-assistant is-check="vm.isHeiMa" a-title="vm.title" body-text="vm.newsInfo.content" is-apply-content="vm.isApplyRight" cover-img="vm.contentParam.cover_keys" cover-type="vm.contentParam.cover_type"></writing-assistant>
    </div>
    <m2o-footer is-color="true" is-show="1"></m2o-footer>
</main>
<hot-footer ng-if="vm.hotFlag" hot-id="vm.id" hot-status="vm.status" this-status="vm.thisStatus" hot-title="vm.title" type="vm.type" this-type="vm.thisType" button-id="vm.ButtonId"></hot-footer>
<div class="hogeTipModal hoge-no-edit-tip no-edit-tip-revise" ng-if="vm.noEdit">
    <div class="hoge-modal-tip hoge-tip-orgInfo">
        <i class="typeface-alert_jinggao fa"></i>
        <!-- <span class="hoge-tip-txt" ng-if="vm.noEdit==1 && !vm.hotFlag && !vm.hotList">当前稿件的审核状态为{{vm.noEditStatus == 2?'已审核':vm.noEditStatus == 9?'待发布':'审核中'}}，编辑功能不可用</span> -->
        <span class="hoge-tip-txt" ng-if="vm.noEdit==2">当前稿件权限为只读</span>
        <span class="hoge-tip-txt" ng-if="(vm.noEdit==1 && vm.hotFlag) || vm.noEdit == 'topic'">内容仅供阅读，不可编辑</span>
        <!-- 8.24调整 状态文案调整，状态细分 -->
        <!-- <span class="hoge-tip-txt" ng-if="vm.noEdit==1 && !vm.hotFlag && !vm.hotList">当前稿件的审核状态为{{vm.noEditStatus == 2?'已审核':vm.noEditStatus == 9?'待发布':'审核中'}}，编辑功能不可用</span> -->
        <span class="hoge-tip-txt" ng-if="vm.noEdit==1 && !vm.hotFlag && !vm.hotList && vm.noEditStatus == 2">当前稿件的审核状态为已审核，编辑功能不可用</span>
        <span class="hoge-tip-txt" ng-if="vm.noEdit==1 && !vm.hotFlag && !vm.hotList && vm.noEditStatus == 3">当前稿件的审核状态为已发布，编辑功能不可用</span>
        <span class="hoge-tip-txt" ng-if="vm.noEdit==1 && !vm.hotFlag && !vm.hotList && vm.noEditStatus == 5">当前稿件的审核状态为审核中，编辑功能不可用</span>
        <span class="hoge-tip-txt" ng-if="vm.noEdit==1 && !vm.hotFlag && !vm.hotList && vm.noEditStatus == 9">当前稿件的审核状态为待发布，编辑功能不可用</span>        <span class="hoge-tip-txt" ng-if="vm.noEdit==2">当前稿件权限为只读</span>
        <!-- <span class="hoge-tip-txt" ng-if="vm.noEdit==1 && vm.hotFlag">内容仅供阅读，不可编辑</span> -->
        <span class="hoge-tip-txt" ng-if="vm.noEdit==1 && !vm.hotFlag && vm.hotList">目前稿件已被采纳不可编辑</span>
    </div>
</div>
