<div class="details-wrapper"><div class="hoge-table-add"><div class="hoge-table-title"><span ng-click="vm.jump()">平台统计 ></span><span style="color:#9ba5bb;cursor:pointer" onclick="history.back(-1)" ng-if="vm.fromDe=='depart'">部门详情 ></span><span>个人详情</span></div></div><div class="white avatar-contain hoge-border"><div class="user-head lf"><span class="avatar w-73"><img src="../assets/images/mxu/avatar-32.jpg" ng-if="!vm.avatar"> <img alt="" src="{{vm.avatar}}"> </span><span class="_500 avatar-name">{{vm.username}}</span></div><div class="user-info rt"><p class="push-number">{{vm.accumulate}}</p><p class="text-muted push-detail">累计发布</p></div></div><div class="timeTab-toggle white"><div class="time-chose"><div class="btn-group"><button class="btn btn-outline btn-comment" ng-click="vm.getWeek()" ng-class="{actived:vm.timeType=='w'}">本周</button> <button class="btn btn-outline btn-comment" ng-click="vm.getMonth()" ng-class="{actived:vm.timeType=='m'}">本月</button> <button class="btn btn-outline btn-comment" ng-click="vm.getYear()" ng-class="{actived:vm.timeType=='y'}">本年</button> <button class="btn btn-outline btn-comment btn-custom" ng-click="vm.getCustom()" ng-show="vm.timeType!='c'">自定义时间</button><div class="daterange" ng-show="vm.timeType=='c'"><i class="glyphicon glyphicon-calendar fa fa-calendar"></i>&nbsp; <input date-range-picker ng-model="vm.rangeDate" class="date-picker" type="text" options="vm.option"></div><div ng-show="vm.timeType!='y'" class="export" style="margin-left:10px;line-height:22px"><a class="list-export" ng-click="vm.Export('all')" ng-href="{{vm.exportUrl}}">全部导出</a></div><div ng-show="vm.type_key =='article' || vm.type_key == 'gallery' || vm.type_key =='video'" class="export" style="margin-left:10px;line-height:22px"><a class="list-export" ng-click="vm.Import()">导入</a></div><input style="display:none" class="input-upload" type="file" id="localFile" nv-file-select uploader="vm.localUploader" accept=".xls, .xlsx, .txt" multiple></div></div></div><div class="details-contain"><div class="contain-left lf"><div class="work-detial border-setting white"><p class="workload-title">工作量统计</p><div class="content-row"><div class="content-col lf col-xs-4 col-sm-4 col-md-4 col-lg-4"><p>{{vm.user_create}}</p><p>内容产出量</p></div><div class="content-col lf col-xs-4 col-sm-4 col-md-4 col-lg-4"><p>{{vm.rank_create}}</p><p>团队排名</p></div><div class="content-col lf col-xs-4 col-sm-4 col-md-4 col-lg-4"><p>{{vm.rate_create}}</p><p>团队中占比</p></div></div><div class="content-row"><div class="content-col lf col-xs-4 col-sm-4 col-md-4 col-lg-4"><p>{{vm.user_publish}}</p><p>内容发布量</p></div><div class="content-col lf col-xs-4 col-sm-4 col-md-4 col-lg-4"><p>{{vm.rank_publish}}</p><p>团队排名</p></div><div class="content-col lf col-xs-4 col-sm-4 col-md-4 col-lg-4"><p>{{vm.rate_publish}}</p><p>团队中占比</p></div></div><div class="content-row"><div class="content-col lf col-xs-4 col-sm-4 col-md-4 col-lg-4"><p>{{vm.user_recall}}</p><p>内容打回量</p></div><div class="content-col lf col-xs-4 col-sm-4 col-md-4 col-lg-4"><p>{{vm.rank_recall}}</p><p>团队排名</p></div><div class="content-col lf col-xs-4 col-sm-4 col-md-4 col-lg-4"><p>{{vm.rate_recall}}</p><p>团队中占比</p></div></div></div><div class="com-effect border-setting white"><p class="workload-title">传播效果统计</p><div class="effect-total"><div class="lf col-xs-6 col-sm-6 col-md-6 col-lg-6"><p>{{vm.click_count}}</p><p>总浏览数</p></div><div class="lf col-xs-6 col-sm-6 col-md-6 col-lg-6"><p>{{vm.commment_count}}</p><p>总评论数</p></div></div></div></div><div class="contain-right white border-setting rt"><p class="workload-title">类型统计</p><div class="chart-box" ui-jp="chart" ui-refresh="vm.isRefresh" ui-options="{{vm.optionsPie}}"></div></div></div><div class="data-list white border-setting"><div class="btn-toolbar list_bar"><div class="btn-group dropdown type-box hoge-dropdown"><button class="btn btn-sm dropdown-toggle" data-toggle="dropdown"><span class="dropdown-label">{{vm.type}}</span> <span class="caret"></span></button><div class="dropdown-menu text-left text-sm"><a class="dropdown-item" ng-repeat="type in vm.typeArr" ng-click="vm.choseType(type)">{{type.name}}</a></div></div><div class="btn-group dropdown type-box hoge-dropdown"><button class="btn btn-sm dropdown-toggle" data-toggle="dropdown"><span class="dropdown-label">{{vm.status}}</span> <span class="caret"></span></button><div class="dropdown-menu text-left text-sm"><a class="dropdown-item" ng-repeat="status in vm.statusArr" ng-click="vm.choseStatus(status)">{{status.name}}</a></div></div><div class="btn-group dropdown type-box hoge-dropdown"><button class="btn btn-sm dropdown-toggle" data-toggle="dropdown"><span class="dropdown-label">{{vm.column}}</span> <span class="caret"></span></button><div class="dropdown-menu text-left text-sm" style="height:300px;overflow-y:auto"><a class="dropdown-item" ng-repeat="column in vm.columnArr" ng-click="vm.choseColumn(column)">{{column.name}}</a></div></div><div class="lf dropdown"><button class="btn btn-outline btn-comment" ng-click="vm.getTime()" ng-class="{actived:vm.sortList=='time_num'}">默认排序</button> <button class="btn btn-outline btn-comment btn-margin btn-sort" ng-click="vm.getClick()" ng-class="{actived:vm.sortList=='clicks'}">浏览量 <i class="fa fa-caret-up order-ascend" ng-class="{'has-chose':vm.click_num!='ASC'}"></i><i class="fa fa-caret-down order-descend" ng-class="{'has-chose':vm.click_num!='DESC'}"></i></button> <button class="btn btn-outline btn-comment btn-margin btn-sort" ng-click="vm.getComment()" ng-class="{actived:vm.sortList=='comments'}">评论数 <i class="fa fa-caret-up order-ascend" ng-class="{'has-chose':vm.comment_num!='ASC'}"></i><i class="fa fa-caret-down order-descend" ng-class="{'has-chose':vm.comment_num!='DESC'}"></i></button></div><div class="form-group search-bottom"><div class="input-group input-group-sm"><input type="text" class="form-control p-x b-a rounded" ng-keypress="vm.keyPress($event)" ng-model="vm.searchKey" placeholder="搜索"> <span class="input-group-btn"><button type="submit" class="btn white b-a rounded no-shadow" ng-click="vm.search()"><i class="fa fa-search"></i></button></span></div></div><div class="export"><a class="list-export" ng-click="vm.Export('person')" ng-href="{{vm.exportUrl}}">导出</a></div></div><div class="list_contain hoge-table-contain"><div class="table_header hoge-table-header" ng-show="vm.dataList.length>0"><div class="wrap b-l b-white"><div class="list-body flex-one">标题（点击可预览）</div><div class="list-type" translate="workload.type"></div><div class="list-status" translate="workload.state"></div><div class="list-column" translate="workload.column"></div><div class="list-views" translate="workload.views"></div><div class="list-comments" translate="workload.comments"></div><div class="list-time">创建人/时间</div><div class="list-score">评分</div></div></div><div class="ErrorTip" ng-show="!vm.dataList.length && !vm.loadingList"><p>{{vm.errorList}}</p></div><div class="list white" ng-show="vm.dataList.length>0"><div class="list-item hoge-item-border" ng-repeat="item in vm.dataList track by $index"><div class="list-body flex-one m-r-sm" ng-click="vm.workPreview(item)"><span style="cursor:pointer">{{item.title}}</span></div><div class="list-type"><span>{{item.type_name}}</span></div><div class="list-status"><span class="label primary m-r-sm grey-300" ng-if="item.status==1" translate="content.pendingAudit"></span> <span class="label primary m-r-sm purple-100" ng-if="item.status==2" translate="content.audited"></span> <span class="label primary m-r-sm gray-300" ng-if="item.status==3" translate="content.release"></span> <span class="label primary m-r-sm red-100" ng-if="item.status==4">已打回 <i class="typeface-form_tishi"></i><div class="reason-box" ng-show="item.reason">{{item.reason}}</div></span><span class="label primary m-r-sm red-100" ng-if="item.status==5">审核中</span> <span class="label primary m-r-sm gray-200" ng-if="item.status==9">待发布</span></div><div class="list-column"><span>{{item.category_name}}</span></div><div class="list-views"><span>{{item.clicks}}</span></div><div class="list-comments"><span ng-if="item.type !='topic'">{{item.comments}}</span> <span ng-if="item.type=='topic'">/</span></div><div class="list-time"><span>{{item.create_user_name}}</span> <span>{{item.created_at.slice(5,16)}}</span></div><div class="list-score"><span ng-if="((vm.permission.all_prms == 1 || vm.isCan) && item.scores == null)&& (item.status!=5 && item.status!=1)" ng-class="{'spanActive': (vm.permission.all_prms == 1 || vm.isCan) && item.scores == null}" class="showScore" ng-mouseenter="vm.showScore(item)" ng-mouseleave="vm.hideScore(item)">快速评分<div class="score" ng-class="{'score-show':item.statusShow,
                                    'score-hide':!item.statusShow}"><div class="score-star"><div class="star"></div><div class="functions-hint" class="input hint"></div></div><div class="score-states"><span class="btn-deter" ng-click="vm.setScore(item)">确定</span> <span class="btn-cancel" ng-click="vm.cancelScore(item)">取消</span></div></div></span><span ng-if="(vm.permission.all_prms == 0 && ! vm.isCan) || (item.status==5 || item.status==1)" class="noCan">暂无评分</span> <span ng-if="((vm.permission.all_prms == 1 || vm.isCan) && item.scores != null)&& (item.status!=5 && item.status!=1)" class="showScore" ng-class="{'hasSpanActive': (vm.permission.all_prms == 1 || vm.isCan) && item.scores != null}" ng-mouseenter="vm.showScore(item)" ng-mouseleave="vm.hideScore(item)"><img width="14px" height="14px" style="margin-bottom:3px;margin-right:3px" src="/assets/images/mxu/workload/score/icon_star_manxing.png"> <span>{{item.scores.score}}</span><div class="score" ng-class="{'score-show':item.statusShow,
                                    'score-hide':!item.statusShow}"><div class="score-star"><div class="star"></div><div class="functions-hint" class="input hint"></div></div><div class="score-state" ng-if="vm.userMsg.id == item.scores.user_id"><div class="score-time">{{item.scores.updated_at}} 已评</div><span class="btn-modify" ng-click="vm.changeScore(item)">修改</span></div><div class="score-stated" ng-if="vm.userMsg.id != item.scores.user_id"><div class="score-user">评分人：{{item.scores.user.username}}</div><span class="score-time">评分时间：{{item.scores.updated_at}}</span></div></div></span></div></div></div><div class="list_bottom hoge-table-bottom" ng-show="vm.dataList.length>0" style="text-align:right"><div style="font-size:12px;color:#949da4;display:inline-block" ng-if="vm.type_key== 'gallery' ">共{{vm.photo_count}}张图片</div><page-nation options="vm.pageOptions" turn-page="vm.changePage()"></page-nation></div></div></div><div ui-include="'../../views/mxu/common/footer.html'"></div></div>