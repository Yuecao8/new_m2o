<div class="voteForm-wrapper wrapper"><form name="vote"><div class="flex-item"><div class="flex-one col-editor"><div class="p-20 box min-height m-b-0"><div class="title-outbox m-b p-b"><div class="new-title flex-item"><div class="title-wrap flex-one col-sm-9"><input type="text" placeholder="{{ 'vote.inputHere'| translate}}" maxlength="30" ng-model="vm.title" style="color:{};"></div><div class="head-btn-wrap col-sm-3 text-right pos-rlt"><div num-count="vm.title" count-top="13" count-max="30" count-position="right" required></div></div></div></div><div class="voteForm-box"><div class="box"><table class="table table-hover m-a-0"><tr><td class="number" translate="vote.orderNumber"></td><td class="option_content" translate="vote.option"></td><td class="initial_num" translate="vote.initialVotes"></td><td class="other"></td></tr><tr ng-repeat="item in vm.voteList" id="{{item.id}}"><td class="v-middle number"><span>{{$index + 1}}</span></td><td class="v-middle option_content content"><div class="content_box" ng-show="!item.edit"><div>{{item.title}}</div><p class="m-t" ng-if="item.option_img"><img ng-src="{{item.option_img}}" alt=""></p></div><div class="content_box" ng-show="item.edit"><span class="editable-wrap editable-text ng-scope"><div class="editable-controls"><textarea type="text" name="name" class="editable-input form-control" ng-model="item.title">{{item.title}}</textarea></div></span><p class="m-t" ng-if="item.option_img"><img ng-src="{{item.option_img}}" alt=""> <span ng-click="vm.delImage(item)">{{ 'vote.delete'| translate}}{{ 'vote.picture'| translate}}</span></p></div></td><td class="v-middle initial_num"><span ng-show="!item.edit">{{item.ini_num}}</span> <span class="editable-wrap editable-text ng-scope" ng-show="item.edit"><div class="editable-controls"><input type="number" name="number" min="0" required class="editable-input form-control form-control-sm" style="text-align:center" ng-model="item.ini_num"></div></span></td><td style="white-space:nowrap" class="other"><div class="buttons" ng-show="!item.edit"><button type="button" class="btn btn-sm btn-comment m-r" ng-click="item.edit = true" translate="vote.edit"></button> <button type="button" class="btn btn-sm del-btn" ng-click="vm.optionDelete(item,$index)" translate="vote.delete"></button></div><div class="buttons" ng-show="item.edit"><input type="file" id="localImg" ng-click="vm.getItem(item)" nv-file-select uploader="vm.localImgUploader" accept="image/gif,image/jpeg,image/png,image/bmp" multiple> <button class="btn btn-comment m-r">{{ 'vote.upload'| translate}}{{ 'vote.picture'| translate}}</button> <button type="button" class="btn btn-sm primary-btn m-r" ng-click="vm.EditComform(item,$index)" translate="vote.save"></button> <button type="button" class="btn btn-sm del-btn" ng-click="vm.optionCancel(item,$index)" translate="vote.cancel"></button></div></td></tr></table><div class="p-a b-t-0"><button type="button" class="btn btn-purple" ng-click="vm.addOption()">+ {{ 'vote.addOption'| translate}}</button></div></div></div><div class="tuji-footer"><div class="footer_form"><div class="row"><div class="col-md-6"><div class="md-form-group float-label" ng-click="vm.setIssue('radio')"><input type="text" class="md-input" disabled ng-class="{'ng-dirty' :  vm.mainColumn.length }"> <label translate="vote.classify"></label><div class="list-point" ng-show="vm.mainColumn.length"><div class="form-pop" ng-repeat="item in vm.mainColumn" title="{{::item.fn}}">{{item.column_name}} <i class="pull-right icon-guanbi" ng-click="vm.delCol(item,$index)"></i></div></div></div><div class="column-top" ng-show="vm.radioStatus"><radio-column column-data="vm.radioList" radio-level="vm.radioLevel" next-radio="vm.nextRadio(column,flag)" choose-radio="vm.selectRadio(item)"></radio-column></div></div><div class="col-md-6"></div></div><div class="row"><div class="col-md-6"><div class="md-form-group float-label"><div class="form-group m-b form-time"><label class="m-b-0 time" translate="vote.startTime"></label><div class="form-control"><div class="row"><div class="col-md-5 date-box"><input placeholder="日期" class="date" ng-model="vm.start_time" data-icon-left="fa fa-chevron-left" data-icon-right="fa fa-chevron-right" data-date-format="yyyy-MM-dd" data-date-type="number" data-autoclose="1" lang="zh-cn" placement="bottom-left" name="date" bs-datepicker data-max-date="{{vm.end_time}}"></div><span class="col-md-1 pull-left icon">/</span><div class="col-md-5 time-box"><input placeholder="时间" class="Time" ng-model="vm.start_time" data-icon-left="fa fa-chevron-left" data-icon-right="fa fa-chevron-right" data-time-format="HH:mm" data-time-type="number" data-autoclose="1" lang="zh-cn" placement="bottom-right" name="time" bs-timepicker></div></div></div></div></div></div><div class="col-md-6"><div class="md-form-group float-label"><div class="form-group m-b form-time"><label class="m-b-0 time" translate="vote.endTime"></label><div class="form-control"><div class="row"><div class="col-md-5 date-box"><input placeholder="日期" class="date" ng-model="vm.end_time" data-icon-left="fa fa-chevron-left" data-icon-right="fa fa-chevron-right" data-date-format="yyyy-MM-dd" data-date-type="number" required data-autoclose="1" lang="zh-cn" placement="bottom-left" name="date" bs-datepicker data-min-date="{{(vm.start_time*1-86400000) |date:'yyyy-MM-dd'}}"></div><span class="col-md-1 pull-left icon">/</span><div class="col-md-5 time-box"><input placeholder="时间" class="Time" ng-model="vm.end_time" data-icon-left="fa fa-chevron-left" data-icon-right="fa fa-chevron-right" data-time-format="HH:mm" data-time-type="number" required data-autoclose="1" lang="zh-cn" placement="bottom-right" name="time" bs-timepicker></div></div></div></div></div></div></div><div class="row"><div class="col-md-10 p-t-sm p-b-sm"><button type="submit" class="btn primary-btn m-r" ng-disabled="vote.$invalid" ng-if="vm.voteId" my-loading="vm.save_loading" ng-click="vm.update()">{{ 'vote.save'| translate}}</button> <button type="submit" class="btn primary-btn m-r" ng-disabled="vote.$invalid" ng-if="!vm.voteId" my-loading="vm.save_loading" ng-click="vm.create()">{{ 'vote.save'| translate}}</button></div></div></div></div></div></div><div class="side_form"><div class="b p-20 box minHight"><div class="form-group m-b fileGroup"><div class="tuji-fileUp pos-rlt" my-loading="vm.cover_loading" ng-class="{'b-dash' :  !vm.coverImgSrc}"><div class="img-item" ng-if="vm.coverImgSrc"><input type="file" nv-file-select="" uploader="vm.coverUploader" multiple><div class="pos-abt fileUpTip" translate="vote.replaceCover"></div></div><div class="pos-abt fileUpTip" ng-show="!vm.coverImgSrc" translate="vote.addCover"></div><input type="file" id="coverFile" nv-file-select uploader="vm.coverUploader" accept="image/gif,image/jpeg,image/png,image/bmp"><div class="img-box" ng-show="vm.coverImgSrc" style="background:url({{vm.coverImgSrc}}) center center no-repeat"></div></div></div><div class="form-group m-b choose"><div class="choose_title" translate="vote.choosePattern"></div><label class="radio-inline"><input type="radio" name="inlineRadioOptions" id="inlineRadio1" value="1" ng-model="vm.option_type" ng-checked="vm.option_type == 1">{{ 'vote.radio'| translate}}</label> <label class="radio-inline"><input type="radio" name="inlineRadioOptions" id="inlineRadio2" value="2" ng-model="vm.option_type" ng-checked="vm.option_type == 2">{{ 'vote.checkbox'| translate}}</label></div><div class="form-group row setting"><label class="col-md-8 text-left switch-label p-b cursor_text" translate="vote.userDefined"></label><div class="col-md-4"><label class="ui-switch m-t-xs"><span class="switch-open">开</span> <span class="switch-close">关</span> <input type="checkbox" ng-model="vm.is_other" ng-checked="vm.is_other" ng-click="vm.checked(vm.is_other)"> <i></i></label></div><label class="col-md-8 text-left switch-label p-b cursor_text" translate="vote.IPLimit"></label><div class="col-md-4"><label class="ui-switch m-t-xs"><span class="switch-open">开</span> <span class="switch-close">关</span> <input type="checkbox" ng-model="vm.is_ip" ng-checked="vm.is_ip" ng-click="vm.checked(vm.is_ip)"> <i></i></label></div><label class="col-md-8 text-left switch-label p-b cursor_text" translate="vote.voteAfterLogin"></label><div class="col-md-4"><label class="ui-switch m-t-xs"><span class="switch-open">开</span> <span class="switch-close">关</span> <input type="checkbox" ng-model="vm.is_userid" ng-checked="vm.is_userid" ng-click="vm.checked(vm.is_userid)"> <i></i></label></div></div><div class="form-group m-b"><div class="md-form-group float-label"><textarea class="b-b form-control brief md-input" ng-model="vm.describes" ng-focus="vm.edit = true" ng-blur="vm.edit = false" ng-class="{'ng-dirty' :  vm.describes  }" maxlength="120"></textarea><div num-count="vm.describes" count-top="110" count-max="120" count-position="right"></div><label translate="vote.describe" class="cursor_default"></label></div></div><div class="form-group m-b" ng-class="{'inputFocues' : vm.showKeyInput }"><div class="md-form-group float-label keyList"><input type="text" class="md-input" ng-class="{'ng-dirty' : true }" disabled><ul class="inlineBlock"><button ng-click="vm.addkey()" ng-hide="vm.showKeyInput" class="btn-ico"><i class="icon-tianjia"></i></button> <input type="text" ng-model="vm.keyContent" class="input-item" ng-hide="!vm.showKeyInput" ng-blur="vm.createKey('1')" ng-keyup="vm.createKey($event)"><li ng-repeat="item in vm.keyList" class="m-r-sm pos-rlt" ng-hide="item.hide"><span>{{::item.keytxt}}</span> <i class="fa icon-guanbi" ng-click="vm.delKey($index)"></i></li></ul><div class="box-color text-color arrow-item" ng-show="vm.keyList.length > 2"><span class="arrow top b-white"></span><div class="box-body"><li ng-repeat="item in vm.keyList" class="m-r-sm pos-rlt" ng-hide="item.hide"><span>{{::item.keytxt}}</span> <i class="fa icon-guanbi" ng-click="vm.delKey($index)"></i></li></div></div><label translate="vote.keywords" class="cursor_text"></label></div></div></div></div></div></form></div>