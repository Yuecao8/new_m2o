<main class="main-form-wrap special-form-wrap"><nav class="hoge-table-add"><div class="hoge-edit-head"><div class="hoge-return-body" ng-if="vm.noEdit == 'topic'" onclick="history.go(-1)"><i class="fa typeface-menu_fanhuiliebiao"></i> <span class="return-tip">返回专题</span></div><div ng-if="vm.noEdit !='topic' && !vm.hotFlag && !vm.publishFlag && !vm.commentFlag && !vm.reviewFlag" class="hoge-return-body" ui-sref="app.content.menu.list({type:'topic',page:vm.pageCount,per_num:vm.pageSize,title:vm.listSearch,status:vm.moduleStatus, category_id:vm.category_id})"><i class="fa typeface-menu_fanhuiliebiao"></i> <span class="return-tip">返回列表</span></div><div ng-if="vm.hotFlag" class="hoge-return-body" ui-sref="app.hot.menu.list({page:vm.pageCount,per_num:vm.pageSize})"><i class="fa typeface-menu_fanhuiliebiao"></i> <span class="return-tip">返回列表</span></div><div ng-if="vm.publishFlag" class="hoge-return-body" ui-sref="app.publish.menu.list({page:vm.pageCount,per_num:vm.pageSize,type:vm.publishType, hideSynergyKind: vm.hideAccessKind ? true : null, column_id:vm.column_id})"><i class="fa typeface-menu_fanhuiliebiao"></i> <span class="return-tip">返回列表</span></div><div ng-if="vm.commentFlag" class="hoge-return-body" ui-sref="app.comment.list({title:vm.listSearch, hideSynergyKind: vm.hideAccessKind ? true : null, project_id: vm.listProjectId ? vm.listProjectId : null, project_title: vm.listProjectTitle ? vm.listProjectTitle : null})"><i class="fa typeface-menu_fanhuiliebiao"></i> <span class="return-tip">返回列表</span></div><div ng-if="vm.reviewFlag" class="hoge-return-body" ui-sref="app.content.review.list({page:vm.pageCount,per_num:vm.pageSize,type:vm.reviewType, hideSynergyKind: vm.hideAccessKind ? true : null})"><i class="fa typeface-menu_fanhuiliebiao"></i> <span class="return-tip">返回列表</span></div><em ng-if="!vm.hotFlag && vm.noEdit != 'topic'">{{vm.specialId?'编辑':'新建'}}专题</em> <em ng-if="vm.hotFlag || vm.noEdit == 'topic'">阅读模式</em><div class="special-process-width-status" ng-show="!vm.specialId"><span class="content-pendingAudit padding-r-w">待审核</span> <span class="process-span" ng-click="vm.chooseProcess()">{{vm.is_show_process ? '已选审核流程': '选择流程'}}</span><div class="process-data-box new-process-data-box" ng-if="vm.showProcessBox"><div class="step-nav-box"><span class="nav-box nav-title">已选流程&nbsp;&nbsp;(保存后生效)</span> <span class="nav-box nav-btn-re-election" ng-click="vm.reElectionProcess()">重选</span> <span class="nav-box nav-btn-clear" ng-click="vm.clearProcess()">清空</span></div><div class="step-box" ng-repeat="(stepIndex,stepItem) in vm.pro_list.nodes"><span class="step-name-box">{{stepItem.rangeName}}</span><div class="flex-item"><div class="step-img-box" ng-style="{'min-width': stepItem.range != 0 && 50+'px' ,'width': (stepItem.users.length > 0 && stepItem.users.length *30+'px') || (stepItem.role_departments.length > 0 && stepItem.role_departments.length *30+'px')}"><img class="avatar-34 usual-img" src="/assets/images/mxu/review/shengao_head_quanbuyonghu@2x.png" alt="" ng-if="stepItem.range==1"><div class="user-one no-avatar-bg{{idx}}" ng-repeat="(idx,userItem) in stepItem.users" ng-style="{'left':idx*25+'px'}" ng-if="idx <= 2"><span class="avatar-34 no-avatar" ng-if="!userItem.avatar"></span> <img class="avatar-34" ng-src="{{userItem.avatar}}" alt="" ng-if="userItem.avatar"> <span>{{userItem.name}}</span></div><div class="user-range-3" ng-style="{'left':idx*25+'px'}" ng-if="stepItem.range==3" ng-repeat="(idx,userItem) in stepItem.role_departments"><img class="avatar-34" src="/assets/images/mxu/review/shengao_head_bumenjuese@2x.png"></div><span class="overflow-user" ng-if="stepItem.users.length >= 4"><i class="typeface-form_zengjia fa"></i> <span class="overflow-num">{{stepItem.users.length - 3}}</span></span></div><div class="role-arrow" ng-if="stepIndex != (vm.processData.nodes.length - 1)"><i class="typeface-shengao_xiayige"></i></div></div></div></div></div><div class="special-process-width-status" ng-show="vm.specialId && vm.create_user_name == vm.user_name"><span class="process-span" ng-if="vm.editStatus==1 && !vm.auditId" ng-click="vm.chooseProcess()">{{vm.is_show_process ? '已选审核流程': '选择流程'}}</span><div class="process-data-box" ng-if="vm.showProcessBox"><div class="step-nav-box"><span class="nav-box nav-title">已选流程&nbsp;&nbsp;(保存后生效)</span> <span class="nav-box nav-btn-re-election" ng-click="vm.reElectionProcess()">重选</span> <span class="nav-box nav-btn-clear" ng-click="vm.clearProcess()">清空</span></div><div class="step-box" ng-repeat="(stepIndex,stepItem) in vm.pro_list.nodes"><span class="step-name-box">{{stepItem.rangeName}}</span><div class="flex-item"><div class="step-img-box" ng-style="{'min-width': stepItem.range != 0 && 50+'px' ,'width': (stepItem.users.length > 0 && stepItem.users.length *30+'px') || (stepItem.role_departments.length > 0 && stepItem.role_departments.length *30+'px')}"><img class="avatar-34 usual-img" src="/assets/images/mxu/review/shengao_head_quanbuyonghu@2x.png" alt="" ng-if="stepItem.range==1"><div class="user-one no-avatar-bg{{idx}}" ng-repeat="(idx,userItem) in stepItem.users" ng-style="{'left':idx*25+'px'}" ng-if="idx <= 2"><span class="avatar-34 no-avatar" ng-if="!userItem.avatar"></span> <img class="avatar-34" ng-src="{{userItem.avatar}}" alt="" ng-if="userItem.avatar"> <span>{{userItem.name}}</span></div><div class="user-range-3" ng-style="{'left':idx*25+'px'}" ng-if="stepItem.range==3" ng-repeat="(idx,userItem) in stepItem.role_departments"><img class="avatar-34" src="/assets/images/mxu/review/shengao_head_bumenjuese@2x.png"></div><span class="overflow-user" ng-if="stepItem.users.length >= 4"><i class="typeface-form_zengjia fa"></i> <span class="overflow-num">{{stepItem.users.length - 3}}</span></span></div><div class="role-arrow" ng-if="stepIndex != (vm.processData.nodes.length - 1)"><i class="typeface-shengao_xiayige"></i></div></div></div></div></div><div class="edit-width-status" ng-if="vm.publishFlag"><span class="content-audited">已发布</span></div><div class="edit-width-status" ng-if="!vm.publishFlag"><span class="content-pendingAudit" ng-if="vm.editStatus==1 && !vm.auditId">待审核</span> <span class="content-audited" ng-if="vm.editStatus==2">已审核</span> <span class="content-audited" ng-if="vm.editStatus==3" translate="content.release">已发布</span> <span class="content-repulsed" ng-if="vm.editStatus==4">已打回</span> <span class="content-repulsed" ng-if="vm.editStatus==9">待发布</span> <span class="content-repulsed" ng-if="vm.editStatus==5 || (vm.editStatus==1 && vm.auditId)">审核中</span> <span class="triangle-btn status-btn" ng-style="{borderTopColor: (vm.editStatus == 2 || vm.editStatus == 3) ? '#42a65a' : '#f1453d'}" ng-class="{'audited-green': vm.editStatus==2}" ng-if="(vm.editStatus==5 || (vm.editStatus==1 && vm.auditId) || vm.editStatus==2 || vm.editStatus==3 || vm.editStatus==4 || vm.editStatus==9) && vm.auditId" ng-click="vm.toggleShowAudit()"></span><div class="audit-contain" ng-if="vm.showAudit"><div class="audit-top"><button class="tog-btn" ng-click="vm.toggleLog(1)" ng-class="{'active': !vm.showLog}">基本信息</button> <button class="tog-btn posi" ng-click="vm.toggleLog(2)" ng-class="{'active': vm.showLog}">审稿日志</button></div><div class="audit-mid" ng-if="!vm.showLog"><div class="mid-top"><span class="cur-pro">当前进度(<span ng-if="vm.editStatus==5 || (vm.editStatus==1 && vm.auditId)">{{vm.currentSpecialProgress}}级审核</span><span ng-if="vm.editStatus==2 || vm.editStatus==3">审核完成</span><span ng-if="vm.editStatus==4">已打回</span><span ng-if="vm.editStatus==9">待发布</span>)</span> <span class="full-pro" ng-click="vm.showFullProcess()">完整流程</span><div class="right-div" ng-if="vm.showRightDiv"><div class="box"></div><div class="process-nodes"><div class="node-item" ng-repeat="(ndx,node) in vm.processData.nodes"><div class="node-main"><div class="node-name" ng-if="node.user.name">{{node.user.name}}</div><div class="node-name" ng-if="(node.range == 1 || node.range == 2 || node.range == 3) && !node.user.name"><span ng-if="node.range == 2">指定用户</span> <span ng-if="node.range == 1">全体用户</span> <span ng-if="node.range == 3">部门角色</span> <img class="branch" ng-if="node.range == 3" src="/assets/images/mxu/review/icon_bumenjuese@2x.png" alt=""> <span class="content-repulsed" ng-if="node.isAuditing">审核中</span></div><div class="node-role flex-item"><div class="role-img" ng-style="{'min-width': node.range != 0 && 50+'px' ,'width': (node.users.length > 0 && node.users.length *30+'px') || (node.role_departments.length > 0 && node.role_departments.length *30+'px')}"><img class="avatar-34 usual-img" src="/assets/images/mxu/review/shengao_head_quanbuyonghu@2x.png" alt="" ng-if="node.range==1"><div class="user-img-box" ng-if="node.range==2"><div class="hoge-tip-arrow avatar-34 usual-img" ng-repeat="(idx,user) in node.users | limitTo:3" ng-style="{'left':idx*25+'px'}"><img class="avatar-34" ng-src="{{user.avatar}}" ng-if="user.avatar"> <i class="typeface-dropdown_xuanze audit-pass" ng-if="node.hasPass"></i> <i class="typeface-form_guanbi audit-back" ng-if="node.isBlocked"></i> <span class="avatar-34 no-avatar no-avatar-bg{{user.bgColor}}" ng-if="!user.avatar">{{user.avatarName}}</span><div class="box-color text-color pos-rlt" ng-style="{'width': user.name.length * 13+'px','left': user.name.length> 3 && (-(user.name.length -3)*4) -2 + 'px'}"><span class="arrow bottom b-white"></span><div class="box-body">{{user.name}}</div></div></div><span class="overflow-user" ng-if="node.users.length >= 4"><i class="typeface-form_zengjia fa"></i> <span class="overflow-num">{{node.users.length-3}}</span></span></div><div class="hoge-tip-arrow avatar-34 usual-img" ng-style="{'left':idx*25+'px'}" ng-if="node.range==3" ng-repeat="(idx,user) in node.role_departments"><img class="avatar-34" src="/assets/images/mxu/review/shengao_head_bumenjuese@2x.png"><div class="box-color text-color pos-rlt" ng-style="{'width': user.role.name.length * 13+'px','left': user.role.name.length> 3 && (-(user.role.name.length -3)*4) -2 + 'px' }"><span class="arrow bottom b-white"></span><div class="box-body">{{user.role.name}}</div></div></div><div class="avatar-34 ellipsis-box" ng-if=" node.range == 0"><i class="typeface-list_caozuo"></i></div></div><div class="role-arrow" ng-if="$index != (vm.processData.nodes.length - 1)"><i class="typeface-shengao_xiayige"></i></div></div></div></div></div></div><div class="bottom-div" ng-if="vm.showBottomDiv"><div class="box"></div><div class="process-nodes"><div class="node-item" ng-repeat="(ndx,node) in vm.processData.nodes"><div class="node-main"><div class="node-name" ng-if="node.user.name">{{node.user.name}}</div><div class="node-name" ng-if="(node.range == 1 || node.range == 2 || node.range == 3) && !node.user.name"><span ng-if="node.range == 2">指定用户</span> <span ng-if="node.range == 1">全体用户</span> <span ng-if="node.range == 3">部门角色</span> <img class="branch" ng-if="node.range == 3" src="/assets/images/mxu/review/icon_bumenjuese@2x.png" alt=""> <span class="content-repulsed" ng-if="node.isAuditing">审核中</span></div><div class="node-role flex-item"><div class="role-img" ng-style="{'min-width': node.range != 0 && 50+'px' ,'width': (node.users.length > 0 && node.users.length *30+'px') || (node.role_departments.length > 0 && node.role_departments.length *30+'px')}"><img class="avatar-34 usual-img" src="/assets/images/mxu/review/shengao_head_quanbuyonghu@2x.png" alt="" ng-if="node.range==1"><div class="user-img-box" ng-if="node.range==2"><div class="hoge-tip-arrow avatar-34 usual-img" ng-repeat="(idx,user) in node.users | limitTo:3" ng-style="{'left':idx*25+'px'}"><img class="avatar-34" ng-src="{{user.avatar}}" ng-if="user.avatar"> <i class="typeface-dropdown_xuanze audit-pass" ng-if="node.hasPass"></i> <i class="typeface-form_guanbi audit-back" ng-if="node.isBlocked"></i> <span class="avatar-34 no-avatar no-avatar-bg{{user.bgColor}}" ng-if="!user.avatar">{{user.avatarName}}</span><div class="box-color text-color pos-rlt" ng-style="{'width': user.name.length * 13+'px','left': user.name.length> 3 && (-(user.name.length -3)*4) -2 + 'px'}"><span class="arrow bottom b-white"></span><div class="box-body">{{user.name}}</div></div></div><span class="overflow-user" ng-if="node.users.length >= 4"><i class="typeface-form_zengjia fa"></i> <span class="overflow-num">{{node.users.length-3}}</span></span></div><div class="hoge-tip-arrow avatar-34 usual-img" ng-style="{'left':idx*25+'px'}" ng-if="node.range==3" ng-repeat="(idx,user) in node.role_departments"><img class="avatar-34" src="/assets/images/mxu/review/shengao_head_bumenjuese@2x.png"><div class="box-color text-color pos-rlt" ng-style="{'width': user.role.name.length * 13+'px','left': user.role.name.length> 3 && (-(user.role.name.length -3)*4) -2 + 'px' }"><span class="arrow bottom b-white"></span><div class="box-body">{{user.role.name}}</div></div></div><div class="avatar-34 ellipsis-box" ng-if=" node.range == 0"><i class="typeface-list_caozuo"></i></div></div><div class="role-arrow" ng-if="$index != (vm.processData.nodes.length - 1)"><i class="typeface-shengao_xiayige"></i></div></div></div></div></div></div></div><div class="process-nodes"><div class="node-item" ng-repeat="(ndx,node) in vm.currentNodes"><div class="node-main"><div class="node-name" ng-if="node.user.name">{{node.user.name}}</div><div class="node-name" ng-if="(node.range == 1 || node.range == 2 || node.range == 3) && !node.user.name"><span ng-if="node.range == 2">指定用户</span> <span ng-if="node.range == 1">全体用户</span> <span ng-if="node.range == 3">部门角色</span> <img class="branch" ng-if="node.range == 3" src="/assets/images/mxu/review/icon_bumenjuese@2x.png" alt=""> <span class="content-repulsed" ng-if="node.isAuditing">审核中</span></div><div class="node-role flex-item"><div class="role-img" ng-style="{'min-width': node.range != 0 && 50+'px' ,'width': (node.users.length > 0 && node.users.length *30+'px') || (node.role_departments.length > 0 && node.role_departments.length *30+'px')}"><img class="avatar-34 usual-img" src="/assets/images/mxu/review/shengao_head_quanbuyonghu@2x.png" alt="" ng-if="node.range==1"><div class="user-img-box" ng-if="node.range==2"><div class="hoge-tip-arrow avatar-34 usual-img" ng-repeat="(idx,user) in node.users | limitTo:3" ng-style="{'left':idx*25+'px'}"><i class="typeface-dropdown_xuanze audit-pass" ng-if="node.hasPass"></i> <i class="typeface-form_guanbi audit-back" ng-if="node.isBlocked"></i> <img class="avatar-34" ng-src="{{user.avatar}}" ng-if="user.avatar"> <span class="avatar-34 no-avatar no-avatar-bg{{user.bgColor}}" ng-if="!user.avatar">{{user.avatarName}}</span><div class="box-color text-color pos-rlt" ng-style="{'width': user.name.length * 13+'px','left': user.name.length> 3 && (-(user.name.length -3)*4) -2 + 'px'}"><span class="arrow bottom b-white"></span><div class="box-body">{{user.name}}</div></div></div><span class="overflow-user" ng-if="node.users.length >= 4"><i class="typeface-form_zengjia fa"></i> <span class="overflow-num">{{node.users.length-3}}</span></span></div><div class="hoge-tip-arrow avatar-34 usual-img" ng-style="{'left':idx*25+'px'}" ng-if="node.range==3" ng-repeat="(idx,user) in node.role_departments"><img class="avatar-34" src="/assets/images/mxu/review/shengao_head_bumenjuese@2x.png"><div class="box-color text-color pos-rlt" ng-style="{'width': user.role.name.length * 13+'px','left': user.role.name.length> 3 && (-(user.role.name.length -3)*4) -2 + 'px' }"><span class="arrow bottom b-white"></span><div class="box-body">{{user.role.name}}</div></div></div><div class="avatar-34 ellipsis-box" ng-if=" node.range == 0"><i class="typeface-list_caozuo"></i></div></div><div class="role-arrow" ng-if="node.hasNext"><i class="typeface-shengao_xiayige"></i></div></div></div></div></div><div class="mid-bottom"><div class="title">稿件评论({{vm.commentList.length}})</div><div class="content"><div class="no-data" ng-if="!vm.commentList.length && !vm.commentLoading"><div><img class="no-data-img" src="/assets/images/mxu/review/img_nothing@2x.png" alt=""><p class="text">暂无评论</p></div></div><div class="item" ng-repeat="comment in vm.commentList track by $index"><img class="image" ng-src="{{comment.user.avatar}}" ng-if="comment.user.avatar" alt=""> <span class="image no-avatar-bg{{comment.user.bgColor}}" ng-if="!comment.user.avatar">{{comment.user.avatarName}}</span><div class="name"><span>{{comment.user.name}}</span> <span class="time">{{comment.time}}</span></div><p class="comment">{{comment.content}}</p></div></div></div></div><div class="audit-bottom" ng-if="!vm.showLog"><input type="text" class="bottom-input" ng-model="vm.comment" placeholder="输入评论"> <button class="primary-btn" ng-click="vm.setComment()">确定</button></div><div class="audit-mid" ng-if="vm.showLog"><div class="no-data" ng-if="!vm.logList.length && !vm.logLoading">暂无数据</div><div class="log-item" ng-repeat="log in vm.logList track by $index"><p class="time">{{log.created_at}}</p><p class="operation">{{log.name}} {{log.operationName}} 了该稿件。<span ng-if="log.operation == 2">评论：{{log.reason}}</span></p></div></div></div></div></div></nav><div class="form-content hoge-flex" ng-class="{'no-event':vm.noEdit}"><aside class="left-aside default-left"><div class="side_form_fixed"><content-attr dropdown-show="vm.showDropdown" is-zyshow="vm.showZY" content-param="vm.contentParam" open-base="vm.openBase" cover-style="vm.coverStyle"></content-attr></div><div class="draft-right"><div class="side_form_fixed"><div class="m-t" style="margin-left:160px" ng-if="vm.is_showPrelink"><div class="preview" ng-click="vm.showPreviews()" style="position:static"><img ng-src="{{vm.is_showSrc ? vm.ActiveSrc :vm.PreSrc}}" ng-mouseleave="vm.is_showSrc = false" ng-mouseenter="vm.is_showSrc = true" alt=""><p>预览链接</p></div><div class="preview-link" ng-show="vm.is_showPreview"><span class="typeface-alert_wancheng2"></span><p>稿件已经自动保存</p><input id="copy-text" type="text" ng-value="vm.preLink"> <span id="copy-link" ng-click="vm.copyLink()">复制链接</span></div></div></div></div></aside><div class="main-form-content hoge-border hoge-flex-one" my-loading="vm.contentloading"><div class="content-form-title" ng-class="{'borsder-bottom' : vm.tpic.topic_pic}"><div class="title-box list-title" style="position:relative"><textarea type="text" name="title" autocomplete="off" placeholder="请输入专题标题" ng-model="vm.title" ng-class="{'mengyu-font': vm.resMengyu(vm.title)}"></textarea><div class="mengyu-title" ng-if="vm.resMengyu(vm.title)"><span class="jiantou arrow bottom"></span> <span class="hideTitle">{{vm.title}}</span></div><content-title-tip is-zyshow="vm.showZY" tip-title="vm.title" top="8"></content-title-tip></div></div><div class="special-content special-wrapper"><div class="t-p" ng-mouseenter="vm.show()" ng-mouseleave="vm.hide()"><div class="i-f-b pos-rlt" my-loading="vm.t_loading" ng-click="vm.clickUploader('#uploaderTitle')"><div class="pos-abt fileUpTip change" ng-if="!vm.tpic.topic_pic">设置题图（支持JPG、GIF、PNG图片）</div><div class="t-poster" style="background:url({{vm.tpic.topic_pic}}) center center no-repeat"></div></div><i class="typeface-alert_cuowu2" ng-if="vm.tpic.topic_pic&&vm.deleteIcon" style="position:absolute;right:10px;top:10px;color:red;z-index:1;cursor:pointer" ng-click="vm.deleteIMG()"></i></div><input type="file" id="uploaderTitle" nv-file-select="" uploader="vm.uploader" accept="image/gif,image/jpeg,image/png,image/psd,image/tiff,image/bmp"><div class="hoge-flex"><div class="menu-wrap"><div class="nav_classify pos-rlt"><nav class="navside m-b"><div class="nav-border b-primary classify-tree" flex><div class="head"><div class="head-box hoge-flex hoge-flex-center" ng-show="!vm.isSort"><span class="hoge-flex-one">全部</span><div class="sort-part hoge-tip-arrow" ng-click="vm.sort()" ng-class="{'no-list':!vm.navList.length}"><i class="fa typeface-form_paixu"></i></div></div><div ng-show="vm.isSort" class="sort-board red-50"><span>排序功能已开启</span><div class="hoge-flex hoge-flex-center hoge-flex-justify-center"><button class="btn btn-sm hoge-btn-blue m-r-sm" ng-click="vm.saveSort()">保存</button> <button class="btn btn-sm white sort-cancel-btn" ng-click="vm.cancelConSort()">取消</button></div></div></div><div ui-sortable="vm.columnSortableOpt" ng-model="vm.navList"><div ng-repeat="item in vm.navList track by $index"><li><div class="item_box hoge-flex hoge-flex-center special-column wotainan" ng-class="{'active':(item.active || item.id == vm.storageSort)}" ng-click="vm.selectClass(item,$index)" style="position:relative"><span title="{{item.name}}" class="item_name"><span class="item_name_span">{{item.name}}</span> </span><i class="fa typeface-form_edit" ng-click="vm.editClassify(item, $index, $event)"></i> <i class="fa typeface-form_shanchu m-l" ng-click="vm.deleteClass(item, $index, $event)"></i><div class="mengyu-title" ng-if="vm.resMengyu(item.name)"><span class="hideTitle">{{item.name}}</span></div><div class="all-title" ng-if="!vm.resMengyu(item.name)"><span class="jiantou arrow bottom"></span> <span class="hideTitle">ID:{{item.id}}<br>{{item.name}}</span></div></div></li></div></div><div style="height:38px;line-height:38px"><div class="item_name" style="color:#969696;cursor:pointer" ng-click="vm.addClassify()"><i class="icon-tianjia"></i> <span class="icon-tianjia-btn">新建栏目</span></div></div></div></nav></div></div><div class="zt-list hoge-flex-one"><div class="zt-t hoge-table-add hoge-flex hoge-flex-center"><div class="list_bar hoge-table-search hoge-flex hoge-flex-center hoge-flex-one"><div class="btn-group dropdown m-r-15 hoge-dropdown"><button class="btn dropdown-toggle" data-toggle="dropdown"><span class="dropdown-label">{{vm.type}}</span> <span class="caret"></span></button><div class="dropdown-menu text-left text-sm font-12"><a class="dropdown-item" ng-repeat="type in vm.typeArr" ng-click="vm.choseType(type)">{{type.name}}</a></div></div><div class="btn-group dropdown hoge-dropdown"><button class="btn btn-sm dropdown-toggle" data-toggle="dropdown"><span class="dropdown-label">{{vm.status}}</span> <span class="caret"></span></button><div class="dropdown-menu text-left text-sm"><a class="dropdown-item" ng-repeat="state in vm.statusArr" ng-click="vm.chooseStatus(state)">{{state.name}}</a></div></div><search-box key-word="vm.key" search-key="vm.search(Item)" key-press="vm.keyPress(Event)" hide-kind="vm.hideAccessKind" is-focus="vm.isFocus" place-holder="vm.placeHolder"></search-box></div><div class="special-entry"><button class="btn btn-purple"><a class="export-a" ng-click="vm.topicDownload()" ng-href="{{vm.topicExportUrl}}">导出</a></button> <button class="btn btn-purple" ng-click="vm.addSpecial()">添加内容</button></div></div><div class="list white"><div class="table-header hoge-table-header" ng-show="!vm.isContentSort"><i class="fa typeface-form_paixu" ng-click="vm.contentSort()" ng-show="vm.order_mode!=1"></i><div class="wrap"><div class="list-title flex-one ng-scope">标题</div><div class="list-i">操作</div></div></div><div class="sort-box" ng-show="vm.isContentSort"><i class="fa typeface-login_tishi"></i>排序功能已开启<div class="hoge-flex hoge-flex-center hoge-flex-justify-center xr-sort-btns"><button class="btn btn-sm hoge-btn-blue m-r-sm" ng-click="vm.saveContentSort()">保存</button> <button class="btn btn-sm white sort-cancel-btn" ng-click="vm.cancelContentConSort()">取消</button></div></div><hoge-error hight-num="'500px'" arr-length="vm.special_List.length" load="vm.contentloading"></hoge-error><div ui-sortable="vm.sortableOpt" ng-model="vm.special_List"><div class="list-item hoge-item-border" ng-click="vm.choseItem(item)" ng-show="vm.special_List.length" ng-repeat="item in vm.special_List track by $index" ng-mouseenter="" ng-class="{'gallerys-item-list':item.type=='gallery','ischoosed':vm.itemCheck(item)}"><span ng-class="{'is-top': item.is_top==1}"></span><div class="list-ctr"><label class="checkbox-inline" ng-if="!vm.isContentSort"><input type="checkbox" value="option1" ng-checked="vm.itemCheck(item)" ng-click="vm.toggle(item)"></label> <i class="fa fa-bars" ng-if="vm.isContentSort"></i></div><div class="list-title flex-one" ng-if="item.type!='gallery'"><div class="list-img"><span class="img-square" ng-if="item.index_pic"><img ng-src="{{item.index_pic}}"></span><div class="img-square" ng-if="!item.index_pic"><img src="../assets/images/mxu/img_cover.png"></div><div class="publish-type"><span class="type-name" ng-if="item.type=='article'">文稿</span> <span class="type-name" ng-if="item.type=='gallery'">图集</span> <span class="type-name" ng-if="item.type=='video'">视频</span> <span class="type-name" ng-if="item.type=='audio'">音频</span> <span class="type-name" ng-if="item.type=='topic'">专题</span> <span class="type-name" ng-if="item.type=='link'">外链</span></div></div><div class="list-info"><div class="part-one"><div class="part-one-title"><i class="typeface-tag_huandeng" ng-if="item.is_slide==1"></i> <i class="typeface-tag_remen" ng-if="item.is_hot==1"></i> <a class="list-name">{{item.title}}</a></div><div class="all-title" ng-if="item.title.length>20"><span class="jiantou arrow bottom"></span> {{item.title}}</div></div><div class="part-two"><div class="list-data"><span class="data-icon"><span>{{item.column_name}}</span> <span>·</span> <span>{{item.click_num || 0}}点击</span> <span>·</span> <span>{{item.publish_user_name}}</span> <span>·</span> <span>{{item.create_time}}</span> </span><span class="data-icon" ng-if="item.comment_num > 0"><i class="typeface-gongzuotai_pinglunshu"></i> <span class="statistic-data">{{item.comment_num}}</span> </span><span class="data-icon" ng-if="item.praise_num > 0"><i class="typeface-list_dianzan"></i> <span class="statistic-data">{{item.praise_num}}</span> </span><span class="data-icon" ng-if="item.share_num > 0"><i class="fa typeface-list_zhuanfa mt-1"></i> <span class="statistic-data">{{item.share_num}}</span></span></div></div></div></div><div class="list-title flex-one gallery-body-body" ng-if="item.type=='gallery'"><div class="list-info"><div class="part-one"><div class="gallery-one-title"><i class="typeface-tag_huandeng" ng-if="item.is_slide==1"></i> <i class="typeface-tag_remen" ng-if="item.is_hot==1"></i> <a class="list-name">{{item.title}}</a></div><div class="all-title" ng-if="item.title.length>20"><span class="jiantou arrow bottom"></span> {{item.title}}</div></div><div class="part-gallery"><div class="list-img"><span class="img-square" ng-repeat="vv in item.gallery_pics.pics"><img ng-src="{{vv}}"></span></div><div class="list-img"><span class="img-square-num flex-item hoge-flex-center hoge-flex-justify-center">共{{item.gallery_pics.total || '0'}}图</span></div></div><div class="part-two"><div class="list-data"><span class="data-icon"><span>{{item.column_name}}</span> <span>·</span> <span>{{item.click_num || 0}}点击</span> <span>·</span> <span>{{item.publish_user_name}}</span> <span>·</span> <span>{{item.create_time}}</span> </span><span class="data-icon" ng-if="item.comment_num > 0"><i class="typeface-gongzuotai_pinglunshu"></i> <span class="statistic-data">{{item.comment_num}}</span> </span><span class="data-icon" ng-if="item.praise_num > 0"><i class="typeface-list_dianzan"></i> <span class="statistic-data">{{item.praise_num}}</span> </span><span class="data-icon" ng-if="item.share_num > 0"><i class="fa typeface-list_zhuanfa mt-1"></i> <span class="statistic-data">{{item.share_num}}</span></span></div></div></div></div><div class="hoge-list-i" ng-if="!vm.isContentSort" ng-mouseenter="vm.showOpera(item)" ng-mouseleave="vm.hideOpera(item)"><div class="icon-tool pull-right"><i class="typeface-list_caozuo hoge-list_caozuo" ng-class="{'active-bg':item.searchShow}"></i><div class="pull-right list-icon-opera" ng-class="{'opera-show':item.searchShow,'opera-hide':!item.searchShow}"><div class="btn-group"><button class="btn hoge-drop-icon btn-cursor" ng-click="vm.goEdit(item)" ng-if="vm.edit_button">编辑</button> <button class="btn hoge-drop-icon btn-cursor" ng-click="vm.goRead(item)" ng-if="vm.topic_content_read">查看</button> <button class="btn hoge-drop-icon btn-cursor" ng-click="vm.handleStick(item,'is_top',item.is_top==1 ? 0 : 1, $index)"><span>{{item.is_top == 1 ? vm.cancelTop : vm.setTop}}</span> <span ng-if="item.is_top == 1" class="dropdown_xuanze"><i class="typeface-dropdown_xuanze"></i></span></button><div class="btn-line"></div><button class="btn hoge-drop-icon btn-cursor" ng-click="vm.delSpeContent(item)">删除</button></div></div></div></div></div></div><div class="list_bottom hoge-table-bottom" ng-show="vm.special_List.length"><div class="btn-group"><label class="checkbox-inline"><input type="checkbox" value="option1" ng-checked="vm.allChecked()" ng-click="vm.toggleAll()">全选</label></div><div class="btn-toolbar list_bar flex-one btn-box"><div class="btn-group" ng-if="!vm.isSort"><button class="btn del-btn" ng-click="vm.deleteAll()">删除</button></div></div><page-nation options="vm.pageOptions" turn-page="vm.getContentList()"></page-nation></div></div></div></div></div></div></div><content-save ng-if="vm.noEdit !='topic'" ng-class="{'no-event':vm.noEdit}" save="vm.save('save')" save-audit="vm.save('saveAudit')" show-zbtn="vm.showZY" clicked="vm.clicked" handle-cancel="vm.cancelForm()" preview="vm.preview()" load="vm.save_loading" clicked="vm.clicked" is-show="false" type="vm.contentParam.urlType" id="vm.specialId" show-type="vm.showType" show="true" is-read-only="vm.noEdit"></content-save></main><hot-footer ng-if="vm.hotFlag" hot-id="vm.id" hot-status="vm.status" this-status="vm.thisStatus" hot-title="vm.title" type="vm.type" this-type="vm.thisType" button-id="vm.ButtonId"></hot-footer><div class="hogeTipModal hoge-no-edit-tip no-edit-tip-revise" ng-if="vm.noEdit"><div class="hoge-modal-tip hoge-tip-orgInfo"><i class="typeface-alert_jinggao fa"></i><span class="hoge-tip-txt" ng-if="vm.noEdit==2">当前稿件权限为只读</span> <span class="hoge-tip-txt" ng-if="(vm.noEdit==1 && vm.hotFlag) || vm.noEdit == 'topic'">内容仅供阅读，不可编辑</span><span class="hoge-tip-txt" ng-if="vm.noEdit==1 && !vm.hotFlag && !vm.hotList && vm.noEditStatus == 2">当前稿件的审核状态为已审核，编辑功能不可用</span> <span class="hoge-tip-txt" ng-if="vm.noEdit==1 && !vm.hotFlag && !vm.hotList && vm.noEditStatus == 3">当前稿件的审核状态为已发布，编辑功能不可用</span> <span class="hoge-tip-txt" ng-if="vm.noEdit==1 && !vm.hotFlag && !vm.hotList && vm.noEditStatus == 5">当前稿件的审核状态为审核中，编辑功能不可用</span> <span class="hoge-tip-txt" ng-if="vm.noEdit==1 && !vm.hotFlag && !vm.hotList && vm.noEditStatus == 9">当前稿件的审核状态为待发布，编辑功能不可用</span> <span class="hoge-tip-txt" ng-if="vm.noEdit==2">当前稿件权限为只读</span><span class="hoge-tip-txt" ng-if="vm.noEdit==1 && !vm.hotFlag && vm.hotList">目前稿件已被采纳不可编辑</span></div></div>