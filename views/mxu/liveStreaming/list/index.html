<div class="live-streaming-wrapper" my-loading="vm.loading"><nav class="hoge-nav"><div class="hoge-table-add"><div class="hoge-edit-head"><em>频道列表</em> <span class="batchUp" ng-if="!vm.noChannel" ng-click="vm.batchUp()">批量上传节目单</span></div></div></nav><div style="height:500px" ng-if="vm.readyingLoading"></div><main class="hoge-radius live-streaming-main" ng-class="{'fade': vm.editShow}" ng-if="!vm.readyingLoading"><div class="no-channel" ng-if="!vm.channelList[0] && !vm.channerListShow && !vm.currentCategory.id &&!vm.loading"><div class="channel-tip-box"><div class="no-title">暂无频道</div><div class="add-channels"><p class="add-icon" ng-click="vm.addChannel()"><i class="typeface-form_zengjia"></i> <span>添加频道</span></p></div></div></div><div class="border-top-radius live-main hoge-flex" ng-show="vm.channelList.length > 0 || vm.currentCategory.id"><div class="channel-list"><div class="channel-classify" ng-class="{'hidden-contain': vm.moreClassify == 1}"><div class="btn-group dropdown hoge-dropdown" ng-show="!vm.sortTip"><button class="btn btn-sm dropdown-toggle toggle-btn" style="width:198px" data-toggle="dropdown"><span class="dropdown-label" ng-cloak>{{vm.currentCategory.name}}</span> <span class="caret"></span></button><div class="dropdown-menu text-left toggle-drop-box" data-toggle="dropdown"><a class="dropdown-item" ng-repeat="category in vm.categoryList track by $index" ng-click="vm.choseCategory(category)">{{category.name}} <input id="datepicker" ng-if="vm.timeArr.length - 1 === $index" date-range-picker ng-model="vm.rangeDate" class="date-picker opacity-0" type="text" options="vm.options"></a></div></div><div class="hoge-input-search pull-right black-input-search" ng-show="!vm.sortTip" ng-class="{'black-search-focus':vm.blackSearch}"><input class="search-input" id="keyword" type="text" placeholder="请输入关键字" ng-keypress="vm.keyPress($event)" ng-model="vm.key" ng-focus="vm.blackSearch=true" ng-blur="vm.blackSearch=false" ng-cloak> <i class="fa typeface-searchbar_sousuo" ng-click="vm.search(vm.key)"></i></div></div><div class="channel-box"><div class="channel-contain" id="channel-contain" ui-sortable="vm.sortableOpt" ng-model="vm.channelList"><div class="no-channel-list" ng-if="!vm.loading && !vm.channelList.length"><span>暂无频道</span></div><div class="channel-item" ng-repeat="channel in vm.channelList"><p class="channel-box-contain" ng-click="vm.choseChannel(channel);" ng-class="{'active':channel.isChose}"><img ng-src="{{channel.index_pic}}" alt=""> <span title="{{channel.name}}">{{channel.name}}</span></p></div><div class="add-list" ng-show="vm.channelPage.pageNum > vm.channelPage.pageCur && !vm.isSort"><img src="/assets/images/mxu/home/new/icon_loading_2x.png" alt=""> <span>正在加载</span></div></div><div class="channel-operate"><div class="sort_board red-50" ng-show="vm.isSort"><span class="paixu_setting">拖拽排序</span> <button class="btn btn-sm white pull-right" ng-click="vm.cancelSort()" translate="system_search.cancel"></button> <button class="m-r-sm btn btn-sm hoge-btn-blue pull-right" ng-click="vm.outSort()" translate="system_search.save"></button></div><div class="operate-icons" ng-show="!vm.isSort"><span class="new-icon"><i class="typeface-form_zengjia" ng-click="vm.addChannel()"></i><div class="box-color text-color pos-rlt operate-tip-box operate-new"><span class="arrow bottom"></span><div class="tips">新增</div></div></span><span class="sort-icon"><i class="typeface-form_paixu" ng-click="vm.sort()"></i><div class="box-color text-color pos-rlt operate-tip-box operate-sort"><span class="arrow bottom"></span><div class="tips">排序</div></div></span></div></div></div></div><div style="width:1010px"><div class="channel-detail"><div class="channel-title"><h5>{{vm.channelDetails.name}}</h5><label class="ui-switch"><span class="switch-open">开</span> <span class="switch-close">关</span> <input type="checkbox" ng-click="vm.toggleChannel(vm.channelDetails)" ng-checked="vm.channelDetails.is_publish"> <i></i></label></div><div class="channel-describe"><span>台号：{{vm.channelDetails.code}}</span> <span>比例：{{vm.channelDetails.aspect}}</span> <span>信号类型：{{vm.channelDetails.is_push == 1 ? '推送' : '拉取'}}</span> <span>分类：{{vm.channelDetails.category.name}}</span></div><div class="pull-right tool-btn"><button class="btn hoge-btn-blue" ng-click="vm.shieldingShow()">屏蔽节目</button> <button class="btn hoge-btn-blue" ng-show="vm.showMenuBtn == 1 && !vm.systemSet" ng-click="vm.seriesShow()">串联单</button> <button class="btn more-button" ng-class="{ 'more-button-hover': vm.moreManage }" ng-click="vm.moreContent()">更多 <span class="caret"></span><div class="more-content" ng-show="vm.moreManage"><div class="item config" ng-click="vm.addChannel(vm.currentChannel)">设置</div><div class="item del" ng-click="vm.delChannel()">删除</div></div></button></div></div><div class="hoge-flex"><div class="video-contain"><div class="video-plays" ng-class="{'common-index':!vm.videoShow,'under-index':vm.videoShow,}"><video id="play-channel-video" class="video-js vjs-big-play-centered video-js vjs-default-skin can-event" controls preload="auto" style="width:100%;height:100%" poster="{{vm.channelDetails.index_pic}}" data-setup="{}" autoplay></video></div><div class="video-detail"><div class="plays-chose" ng-if="vm.playStreams.length > 0" ng-style="{top: -(vm.playStreams.length)*40 - 36 + (vm.playStreams.length - 1) * 8 + 'px'}"><div class="plays-item" ng-class="{'chosed': plays.isChose}" ng-repeat="plays in vm.playStreams" ng-click="vm.choseStream(plays);"><span>{{plays.name}}</span></div></div><div class="details"><span class="currentName">流名称：{{vm.currentStreams.name}}</span><span class="currentName">码率： {{vm.currentStreams.bitrate}}</span><span class="currentName">流状态：{{vm.currentStreams.status == 1 ? '正常' : '异常'}}</span></div><div class="details current-box"><span class="currentM3u8" ng-click="vm.copyText()">播放地址: <span class="m3u8-url">{{vm.currentStreams.m3u8}}</span> <input type="text" id="m3u8-copy" value="{{vm.currentStreams.m3u8}}"> </span><button class="btn hoge-btn-blue btn-generate" ng-click="vm.generateAdress()">生成地址</button></div><div class="details current-box"><span class="currentM3u8 currentStream" ng-click="vm.copyTextStream()">推/拉流地址: <span class="m3u8-url stream-url">{{vm.currentStreams.stream_url}}</span> <input type="text" id="stream-copy" value="{{vm.currentStreams.stream_url}}"></span></div></div></div><div class="program-list"><div class="program-header"><div class="date-box hoge-flex"><div class="arrow-box arrow-left"><i class="typeface-pagination_shangyiye" ng-click="vm.toPreview()" ng-class="{'no-pre': !vm.canPreview,'can-pre':false}"></i></div><div class="date-chose hoge-flex"><div class="time-box" ng-class="{'chosed':date.isChose}" ng-repeat="date in vm.dateList" ng-click="vm.togglePrograms(date);"><div class="week">星期{{date.weekName}}</div><div class="date">{{date.dateName}}日</div></div></div><div class="arrow-box arrow-right"><i class="typeface-pagination_xiayiye" ng-click="vm.toNext()"></i></div></div><div class="pull-right set-program"><button class="btn hoge-btn-blue btn-set" ng-if="!vm.noChannel" ng-click="vm.goProgramme()">设置节目单</button></div></div><div class="program-list-contain"><div class="program-item hoge-flex" ng-class="{'program-normal': program.can_play == 1, 'program-disable': program.can_play == 0, 'program-on': program.isChose}" ng-repeat="program in vm.programList"><div class="list-time">{{program.time}}</div><div class="list-body hoge-flex-one" ng-click="vm.choseProgram(program)">{{program.name}}</div></div></div></div></div></div></div><div class="border-bottom-radius shift-include hoge-flex" ng-if="vm.channelList.length > 0 || vm.currentCategory.id"><div class="flex-three"><div class="type-chose"><div class="btn-contain btn-group"><button class="btn btn-outline btn-blue" ng-click="vm.changeType(1)" ng-class="{'actived':vm.currentType == 1}">时移</button> <button class="btn btn-outline btn-blue" ng-click="vm.changeType(2)" ng-class="{'actived':vm.currentType == 2}">收录</button></div></div><div class="data-list"><hoge-error hight-num="'550px'" arr-length="vm.videoList.length" load="vm.videoLoading"></hoge-error><div class="row"><div class="col-sm-6" ng-repeat="video in vm.videoList" ng-class="{'col-lg-4 col-md-4 col-xl-4': !vm.noStatistic,'col-lg-3 col-md-3 col-xl-3': vm.noStatistic}"><div class="data-item"><div class="data-play" ng-click="vm.videoDtails(video)"><div class="data-error-tip" ng-if="video.videoError">视频加载错误</div><video id="play-video-{{video.id}}-{{video.millisecond}}" class="video-js vjs-big-play-centered video-js vjs-default-skin can-event" controls preload="auto" style="width:100%;height:100%" poster="{{video.index_pic}}" data-setup="{}"></video></div><div class="data-time"><div>开始：<span>{{video.start_time}}</span></div><div>结束：<span>{{video.end_time}}</span></div></div><div class="data-title">{{video.title}}</div></div></div></div><div class="list_bottom" ng-if="vm.videoList.length > 0"><page-nation options="vm.pageOptions" turn-page="vm.changePage()"></page-nation></div></div></div><div class="data-statistic hoge-flex-one" ng-if="!vm.noStatistic"><div class="stat-box"><div class="stat-title">统计数据</div><div class="hoge-flex"><div class="data-general flex-one"><p class="data-num">{{vm.generalData.online_num || 0}}</p><span class="data-describe">当前在线(人)</span></div><div class="data-general flex-one"><p class="data-num">{{vm.generalData.duration || 0}}</p><span class="data-describe">观看时长(秒)</span></div><div class="data-general flex-one"><p class="data-num">{{vm.generalData.comment_num || 0}}</p><span class="data-describe">评论数(条)</span></div></div></div><div class="stat-box"><div class="stat-title">点击量</div><div class="chart-style line-style"><div class="chart-box" id="dataLine" ui-jp="chart" ui-refresh="vm.isRefreshLine" ui-options="{{vm.lineOptions}}"></div></div></div><div class="stat-box"><div class="stat-title">访问分布</div><div class="chart-style pie-style"><div class="chart-box" id="dataLine" ui-jp="chart" ui-refresh="vm.isRefreshPie" ui-options="{{vm.pieOptions}}"></div></div></div></div></div></main><div class="add-channel-box" ng-class="{'fade': vm.editShow, 'in': !vm.editShow}"><div ui-include="'../views/mxu/liveStreaming/addChannel/index.html'"></div></div></div>