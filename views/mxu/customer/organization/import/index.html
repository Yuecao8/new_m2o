<div class="mxu_import"><div class="p-v-md"><div class="hoge-edit-head"><div class="hoge-return-body" onclick="history.back(-1)"><i class="fa typeface-menu_fanhuiliebiao"></i> <span class="return-tip">返回列表</span></div><em>导入用户</em></div></div><div class="box-body"><div class="navigation border-top-radius"><div class="ready"><i class="fa" ng-class="{'fa-circle-o': vm.step == 1, 'typeface-alert_wancheng': vm.step == 2}"></i><div class="name">导入准备</div></div><div class="go" ng-class="{'go-active': vm.step == 2}"></div><div class="achieve" ng-class="{'icon-active': vm.step == 2}"><i class="fa fa-circle-o"></i><div class="name">确认导入</div></div></div><div class="firstContent" ng-show="vm.step == 1"><div class="content"><div class="part"><div class="title">准备用户</div><div class="part-body"><div class="bottom"><button class="btn common-btn" ng-click="vm.goDown()">下载导入模板</button></div><div class="tip-more"><div>导入的用户个数需小于100，所有允许导入的用户字段请参考模版，用户字段不符合规则，该用户不予以导入；规则字段如下：</div><div>1）所有用户字段均为必填；</div><div>2）“手机号”字段仅支持数字输入</div><div>3）“部门”字段需要根据部门结构指向所在部门，多个部门之间用“；”分隔；</div><div>4）“角色”字段必须为系统中已有的角色；</div><div>5）“锁定账户”、“是否强制修改密码”必须输入“是” 或 “否”；</div></div></div></div><div class="part part-two"><div class="title">上传数据文件</div><div class="first-upload" ng-if="!vm.fileName"><div class="upload-box"><div class="upload-img" ng-click="vm.uploadClick()"></div><div class="click-tip">点击这里上传文件</div><div class="file-tip">目前支持的文件类型为*.xls，*.xlsx。</div></div></div><div class="part-body" ng-if="vm.fileName"><p class="bottom"><button class="btn common-btn" ng-click="vm.uploadClick()">更换文件</button></p><div class="file-tip">已传文件： {{vm.fileName}}</div></div><input class="input-upload" type="file" id="localFile" nv-file-select uploader="vm.localUploader" accept=".xls, .xlsx" multiple></div></div></div><div class="import_list" ng-show="vm.step == 2"><div class="btn-contain btn-group"><button class="btn common-btn btn-outline btn-blue" ng-class="{'import-active': vm.isImport == 1}" ng-click="vm.isImport = 1">可导入({{vm.canOptions.total}})</button> <button class="btn common-btn btn-outline btn-blue" ng-class="{'import-active': vm.isImport == 2}" ng-click="vm.isImport = 2">不可导入({{vm.canNotOptions.total}})</button></div><div class="list-content" ng-show="vm.isImport == 1"><div class="table_header hoge-table-header"><div class="wrap b-l b-white head"><div class="list-body">用户</div><div class="one list-name">姓名</div><div class="one list-phone">手机号</div><div class="one list-part">部门</div><div class="one list-role">角色</div><div class="one list-lock">锁定账户</div><div class="one list-password">密码</div><div class="one list-isLock">是否强制修改密码</div></div></div><div class="list"><div class="ErrorTip" ng-show="!vm.canList.length"><p>暂无数据</p></div><div class="list-item hoge-item-border" ng-repeat="item in vm.canList"><div ng-repeat="itemChild in item" class="list-body" ng-if="itemChild.key == 'username'">{{itemChild.display}}</div><div ng-repeat="itemChild in item" class="list-name" ng-if="itemChild.key == 'name'">{{itemChild.display}}</div><div ng-repeat="itemChild in item" class="list-grouping" ng-if="itemChild.key == 'group'">{{itemChild.display}}</div><div ng-repeat="itemChild in item" class="one list-phone" ng-if="itemChild.key == 'phone'">{{itemChild.display}}</div><div ng-repeat="itemChild in item" class="one list-part" ng-if="itemChild.key == 'department'">{{itemChild.display}}</div><div ng-repeat="itemChild in item" class="one list-role" ng-if="itemChild.key == 'role'">{{itemChild.display}}</div><div ng-repeat="itemChild in item" class="one list-lock" ng-if="itemChild.key == 'locked'">{{itemChild.display}}</div><div ng-repeat="itemChild in item" class="one list-password" ng-if="itemChild.key == 'password'">{{itemChild.display}}</div><div ng-repeat="itemChild in item" class="one list-isLock" ng-if="itemChild.key == 'reset_pwd'">{{itemChild.display}}</div></div></div><div class="list_bottom hoge-table-bottom"><page-nation options="vm.canOptions" turn-page="vm.changeCanPages()"></page-nation></div></div><div class="list-content" ng-show="vm.isImport == 2"><div class="table_header hoge-table-header"><div class="wrap b-l b-white head"><div class="list-body">用户</div><div class="one list-name">姓名</div><div class="one list-phone">手机号</div><div class="one list-part">部门</div><div class="one list-role">角色</div><div class="one list-lock">锁定账户</div><div class="one list-password">密码</div><div class="one list-isLock">是否强制修改密码</div></div></div><div class="list"><div class="ErrorTip" ng-show="!vm.notList.length"><p>暂无数据</p></div><div class="list-item hoge-item-border" ng-repeat="item in vm.notList"><div ng-repeat="itemChild in item" ng-class="{'itemError': itemChild.status == 0}" class="list-body" ng-if="itemChild.key == 'username'">{{itemChild.display}}</div><div ng-repeat="itemChild in item" ng-class="{'itemError': itemChild.status == 0}" class="list-name" ng-if="itemChild.key == 'name'">{{itemChild.display}}</div><div ng-repeat="itemChild in item" ng-class="{'itemError': itemChild.status == 0}" class="list-grouping" ng-if="itemChild.key == 'group'">{{itemChild.display}}</div><div ng-repeat="itemChild in item" ng-class="{'itemError': itemChild.status == 0}" class="one list-phone" ng-if="itemChild.key == 'phone'">{{itemChild.display}}</div><div ng-repeat="itemChild in item" ng-class="{'itemError': itemChild.status == 0}" class="one list-part" ng-if="itemChild.key == 'department'">{{itemChild.display}}</div><div ng-repeat="itemChild in item" ng-class="{'itemError': itemChild.status == 0}" class="one list-role" ng-if="itemChild.key == 'role'">{{itemChild.display}}</div><div ng-repeat="itemChild in item" ng-class="{'itemError': itemChild.status == 0}" class="one list-lock" ng-if="itemChild.key == 'locked'">{{itemChild.display}}</div><div ng-repeat="itemChild in item" ng-class="{'itemError': itemChild.status == 0}" class="one list-password" ng-if="itemChild.key == 'password'">{{itemChild.display}}</div><div ng-repeat="itemChild in item" ng-class="{'itemError': itemChild.status == 0}" class="one list-isLock" ng-if="itemChild.key == 'reset_pwd'">{{itemChild.display}}</div></div></div><div class="list_bottom hoge-table-bottom"><page-nation options="vm.canNotOptions" turn-page="vm.changeNotPages()"></page-nation></div></div><div class="num-tip">{{vm.importList.length}} / {{vm.importList.length + vm.importNotList.length}}条用户信息将会被导入</div></div><div class="btn-bottom"><button type="submit" class="btn common-btn m-r" ng-click="vm.save()" ng-show="vm.step == 1">下一步 <i class="fa typeface-pagination_xiayiye" style="font-size:12px;transform:scale(.8)"></i></button> <button type="submit" class="btn common-btn m-r" ng-click="vm.next()" ng-show="vm.step == 2"><i class="fa typeface-pagination_shangyiye" style="font-size:12px;transform:scale(.8)"></i> 上一步</button> <button type="submit" class="btn common-btn sure-btn m-r" ng-click="vm.importSure()" ng-show="vm.step == 2">确定导入</button> <button class="btn common-btn cancel-btn" ng-click="vm.cancel()">取消</button></div></div><div class="animation-loading" ng-if="vm.animationLoading"><div style="margin:0 auto"><spin></spin><span class="text">处理中...</span></div></div></div>